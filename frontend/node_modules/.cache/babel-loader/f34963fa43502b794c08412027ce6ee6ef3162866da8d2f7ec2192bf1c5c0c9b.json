{"ast":null,"code":"import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import Footer from\"../../layouts/footer\";import Login from\"./log-in\";import ResetPassword from\"./reset-pw\";import ResetPasswordEmail from\"./resetPw-email\";import SignUp from\"./sign-up\";import{useParams}from\"react-router-dom\";import SingleClick from\"./single-click\";import{useDispatch,useSelector}from\"react-redux\";import{getCurrentUserProfile}from\"../../actions/userActions\";import{Card}from\"react-bootstrap\";import{AppLogo}from\"../../layouts/icons\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Main(){var _useParams=useParams(),token=_useParams.token;var location=useLocation();var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isValid=_useState2[0],setIsValid=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),currUserProfile=_useState4[0],setCurrUserProfile=_useState4[1];var localToken=Cookies.get(\"token\");useEffect(function(){if(localToken&&location.pathname===\"/\"&&location.state===null)setIsValid(localToken);},[localToken,location.pathname,location.state]);useEffect(function(){if(isValid)dispatch(getCurrentUserProfile());},[dispatch,isValid]);var currProfile=useSelector(function(securityReducer){return securityReducer.users.currProfile;});var error=useSelector(function(errorReducer){return errorReducer.errors.errors.status;});useEffect(function(){if(isValid){if(currProfile&&!error){setCurrUserProfile(currProfile.data);}else{localStorage.clear();Cookies.remove(\"token\");navigate(0);}}},[currProfile,error,navigate,isValid]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-content\",children:/*#__PURE__*/_jsxs(Card,{className:\"login-card\",style:location.pathname!==\"/signup\"?{width:\"28rem\"}:{},children:[!isValid?/*#__PURE__*/_jsx(AppLogo,{w:\"80px\",defClass:\"mb-4\"}):\"\",location.pathname===\"/signup\"?/*#__PURE__*/_jsx(SignUp,{}):location.pathname===\"/reset-password-auth\"?/*#__PURE__*/_jsx(ResetPasswordEmail,{}):location.pathname===\"/reset-password/\".concat(encodeURIComponent(token))?/*#__PURE__*/_jsx(ResetPassword,{token:encodeURIComponent(token)}):isValid?/*#__PURE__*/_jsx(SingleClick,{currUserProfile:currUserProfile}):/*#__PURE__*/_jsx(Login,{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-footer\",children:window.location.pathname===\"/signup\"?/*#__PURE__*/_jsxs(\"h6\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Log in\"})]}):/*#__PURE__*/_jsxs(\"h6\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign Up\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsx(Footer,{})})]});}export default Main;","map":{"version":3,"names":["React","useEffect","useState","Link","useLocation","useNavigate","Footer","Login","ResetPassword","ResetPasswordEmail","SignUp","useParams","SingleClick","useDispatch","useSelector","getCurrentUserProfile","Card","AppLogo","Cookies","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Main","_useParams","token","location","dispatch","navigate","_useState","_useState2","_slicedToArray","isValid","setIsValid","_useState3","_useState4","currUserProfile","setCurrUserProfile","localToken","get","pathname","state","currProfile","securityReducer","users","error","errorReducer","errors","status","data","localStorage","clear","remove","children","id","className","style","width","w","defClass","concat","encodeURIComponent","window","to"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/UserAuth/main.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport Footer from \"../../layouts/footer\";\nimport Login from \"./log-in\";\nimport ResetPassword from \"./reset-pw\";\nimport ResetPasswordEmail from \"./resetPw-email\";\nimport SignUp from \"./sign-up\";\nimport { useParams } from \"react-router-dom\";\nimport SingleClick from \"./single-click\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getCurrentUserProfile } from \"../../actions/userActions\";\nimport { Card } from \"react-bootstrap\";\nimport { AppLogo } from \"../../layouts/icons\";\nimport Cookies from \"js-cookie\";\n\nfunction Main() {\n  let { token } = useParams();\n  let location = useLocation();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [isValid, setIsValid] = useState(false);\n  const [currUserProfile, setCurrUserProfile] = useState({});\n  const localToken = Cookies.get(\"token\");\n\n  useEffect(() => {\n    if (localToken && location.pathname === \"/\" && location.state === null)\n      setIsValid(localToken);\n  }, [localToken, location.pathname, location.state]);\n\n  useEffect(() => {\n    if (isValid) dispatch(getCurrentUserProfile());\n  }, [dispatch, isValid]);\n\n  var currProfile = useSelector(\n    (securityReducer) => securityReducer.users.currProfile\n  );\n\n  var error = useSelector((errorReducer) => errorReducer.errors.errors.status);\n\n  useEffect(() => {\n    if (isValid) {\n      if (currProfile && !error) {\n        setCurrUserProfile(currProfile.data);\n      } else {\n        localStorage.clear();\n        Cookies.remove(\"token\");\n        navigate(0);\n      }\n    }\n  }, [currProfile, error, navigate, isValid]);\n\n  return (\n    <>\n      <div id=\"auth-container\">\n        <div className=\"auth-content\">\n          <Card\n            className=\"login-card\"\n            style={location.pathname !== \"/signup\" ? { width: \"28rem\" } : {}}\n          >\n            {!isValid ? <AppLogo w={\"80px\"} defClass=\"mb-4\" /> : \"\"}\n\n            {location.pathname === \"/signup\" ? (\n              <SignUp />\n            ) : location.pathname === \"/reset-password-auth\" ? (\n              <ResetPasswordEmail />\n            ) : location.pathname ===\n              `/reset-password/${encodeURIComponent(token)}` ? (\n              <ResetPassword token={encodeURIComponent(token)} />\n            ) : isValid ? (\n              <SingleClick currUserProfile={currUserProfile} />\n            ) : (\n              <Login />\n            )}\n          </Card>\n        </div>\n        <div className=\"auth-footer\">\n          {window.location.pathname === \"/signup\" ? (\n            <h6>\n              Already have an account? <Link to=\"/\">Log in</Link>\n            </h6>\n          ) : (\n            <h6>\n              Don't have an account? <Link to=\"/signup\">Sign Up</Link>\n            </h6>\n          )}\n        </div>\n      </div>\n      <div className=\"footer\">\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default Main;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}