{"ast":null,"code":"import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useContext,useEffect,useState}from\"react\";import{Card,Container}from\"react-bootstrap\";import{useLocation,useParams,useSearchParams}from\"react-router-dom\";import EventItem from\"../Event/event-item\";import ManageMembers from\"../Event/manage-members\";import CommentItem from\"../Comments/comment-item\";import CreateComment from\"../Comments/create-comment\";import{SearchParam}from\"../Utilities/search-param\";import Pagination from\"../../layouts/pagination\";import Breadcrumbs from\"../../layouts/breadcrumbs\";import{ACCEPTED,CANCELLED,FINISHED,OWNER}from\"../Event/utilities/types\";import{SingleEventHandler}from\"../Event/utilities/action-handlers\";import{SecurityContext}from\"../Context/security-context\";import{BadgeItem}from\"../Event/utilities/event-builder\";import{Information}from\"../../layouts/icons\";import{InfoCard}from\"../../layouts/info-cards\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var SingleEventContext=/*#__PURE__*/createContext();function EventDash(){var params=useParams();var pageId=SearchParam();var eventData=SingleEventHandler(params,pageId).eventData;var commentData=SingleEventHandler(params,pageId).commentData;var currentUser=useContext(SecurityContext);//pagination\nvar _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,1),postPerPage=_useState4[0];// eslint-disable-next-line no-unused-vars\nvar _useSearchParams=useSearchParams({}),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var _useLocation=useLocation(),state=_useLocation.state;//pagination\nuseEffect(function(){if(state){var id=state.id;setCurrentPage(id);}},[state]);useEffect(function(){setSearchParams({page:currentPage});},[setSearchParams,currentPage]);var paginate=function paginate(pageNumber){return setCurrentPage(pageNumber);};//breadcrumbs\nvar breadcrumbItem=eventData?[{title:\"Dashboard\",path:\"/posts\",current:false},{title:eventData.title,path:\"/event/\".concat(eventData.id),current:true}]:\"\";return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SingleEventContext.Provider,{value:eventData,children:eventData?/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dash-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Breadcrumbs,{items:breadcrumbItem}),eventData.joinedStatus===OWNER||eventData.joinedStatus===ACCEPTED?/*#__PURE__*/_jsx(CreateComment,{id:params.id}):/*#__PURE__*/_jsx(Card,{className:\"event-card\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(Card.Text,{children:\"You will be able collaborate with others via comments once you are accepted.\"})})}),commentData.results?commentData.results.map(function(comment,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CommentItem,{commentData:comment,commentCount:commentData.count})},index);}):\"\",commentData.count>10?/*#__PURE__*/_jsx(Pagination,{postsPerPage:postPerPage,totalPosts:commentData.count,paginate:paginate,currentPage:currentPage}):\"\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar_eventDash\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-wrapper\",children:/*#__PURE__*/_jsxs(Container,{children:[eventData.eventStatus===CANCELLED||eventData.eventStatus===FINISHED?/*#__PURE__*/_jsx(InfoCard,{title:\"Note\",content:/*#__PURE__*/_jsxs(_Fragment,{children:[\"This event now has\",\" \",/*#__PURE__*/_jsx(BadgeItem,{eventStatus:eventData.eventStatus}),\" \",\"therefore it can not be updated or particapated in.\"]}),icon:/*#__PURE__*/_jsx(Information,{}),cardStyle:{backgroundColor:\"#eaebfd\"}}):\"\",/*#__PURE__*/_jsx(EventItem,{commentCount:commentData.count}),currentUser===eventData.user&&eventData.eventStatus!==CANCELLED&&eventData.eventStatus!==FINISHED?/*#__PURE__*/_jsx(ManageMembers,{currentUser:currentUser}):\"\"]})})})]})}):\"\"})});}export default EventDash;","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","Card","Container","useLocation","useParams","useSearchParams","EventItem","ManageMembers","CommentItem","CreateComment","SearchParam","Pagination","Breadcrumbs","ACCEPTED","CANCELLED","FINISHED","OWNER","SingleEventHandler","SecurityContext","BadgeItem","Information","InfoCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SingleEventContext","EventDash","params","pageId","eventData","commentData","currentUser","_useState","_useState2","_slicedToArray","currentPage","setCurrentPage","_useState3","_useState4","postPerPage","_useSearchParams","_useSearchParams2","searchParams","setSearchParams","_useLocation","state","id","page","paginate","pageNumber","breadcrumbItem","title","path","current","concat","children","Provider","value","style","position","className","items","joinedStatus","Body","Text","results","map","comment","index","commentCount","count","postsPerPage","totalPosts","eventStatus","content","icon","cardStyle","backgroundColor","user"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/Dashboards/event-dash.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { Card, Container } from \"react-bootstrap\";\nimport { useLocation, useParams, useSearchParams } from \"react-router-dom\";\nimport EventItem from \"../Event/event-item\";\nimport ManageMembers from \"../Event/manage-members\";\nimport CommentItem from \"../Comments/comment-item\";\nimport CreateComment from \"../Comments/create-comment\";\nimport { SearchParam } from \"../Utilities/search-param\";\nimport Pagination from \"../../layouts/pagination\";\nimport Breadcrumbs from \"../../layouts/breadcrumbs\";\nimport { ACCEPTED, CANCELLED, FINISHED, OWNER } from \"../Event/utilities/types\";\nimport { SingleEventHandler } from \"../Event/utilities/action-handlers\";\nimport { SecurityContext } from \"../Context/security-context\";\nimport { BadgeItem } from \"../Event/utilities/event-builder\";\nimport { Information } from \"../../layouts/icons\";\nimport { InfoCard } from \"../../layouts/info-cards\";\n\nexport const SingleEventContext = createContext();\n\nfunction EventDash() {\n  const params = useParams();\n  let pageId = SearchParam();\n\n  const eventData = SingleEventHandler(params, pageId).eventData;\n  const commentData = SingleEventHandler(params, pageId).commentData;\n  const currentUser = useContext(SecurityContext);\n\n  //pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [postPerPage] = useState(10);\n  // eslint-disable-next-line no-unused-vars\n  const [searchParams, setSearchParams] = useSearchParams({});\n  const { state } = useLocation();\n\n  //pagination\n  useEffect(() => {\n    if (state) {\n      const { id } = state;\n      setCurrentPage(id);\n    }\n  }, [state]);\n\n  useEffect(() => {\n    setSearchParams({ page: currentPage });\n  }, [setSearchParams, currentPage]);\n\n  const paginate = (pageNumber) => setCurrentPage(pageNumber);\n\n  //breadcrumbs\n  const breadcrumbItem = eventData\n    ? [\n        { title: \"Dashboard\", path: \"/posts\", current: false },\n        {\n          title: eventData.title,\n          path: `/event/${eventData.id}`,\n          current: true,\n        },\n      ]\n    : \"\";\n\n  return (\n    <>\n      <SingleEventContext.Provider value={eventData}>\n        {eventData ? (\n          <div style={{ position: \"relative\" }}>\n            <div className=\"dash-container\">\n              <div className=\"content\">\n                <Container>\n                  <Breadcrumbs items={breadcrumbItem} />\n                  {eventData.joinedStatus === OWNER ||\n                  eventData.joinedStatus === ACCEPTED ? (\n                    <CreateComment id={params.id} />\n                  ) : (\n                    <Card className=\"event-card\">\n                      <Card.Body>\n                        <Card.Text>\n                          You will be able collaborate with others via comments\n                          once you are accepted.\n                        </Card.Text>\n                      </Card.Body>\n                    </Card>\n                  )}\n\n                  {commentData.results\n                    ? commentData.results.map((comment, index) => {\n                        return (\n                          <div key={index}>\n                            <CommentItem\n                              commentData={comment}\n                              commentCount={commentData.count}\n                            />\n                          </div>\n                        );\n                      })\n                    : \"\"}\n                  {commentData.count > 10 ? (\n                    <Pagination\n                      postsPerPage={postPerPage}\n                      totalPosts={commentData.count}\n                      paginate={paginate}\n                      currentPage={currentPage}\n                    />\n                  ) : (\n                    \"\"\n                  )}\n                </Container>\n              </div>\n\n              <div className=\"sidebar_eventDash\">\n                <div className=\"sidebar-wrapper\">\n                  <Container>\n                    {eventData.eventStatus === CANCELLED ||\n                    eventData.eventStatus === FINISHED ? (\n                      <InfoCard\n                        title=\"Note\"\n                        content={\n                          <>\n                            This event now has{\" \"}\n                            <BadgeItem eventStatus={eventData.eventStatus} />{\" \"}\n                            therefore it can not be updated or particapated in.\n                          </>\n                        }\n                        icon={<Information />}\n                        cardStyle={{ backgroundColor: \"#eaebfd\" }}\n                      />\n                    ) : (\n                      \"\"\n                    )}\n\n                    <EventItem commentCount={commentData.count} />\n                    {currentUser === eventData.user &&\n                    eventData.eventStatus !== CANCELLED &&\n                    eventData.eventStatus !== FINISHED ? (\n                      <ManageMembers currentUser={currentUser} />\n                    ) : (\n                      \"\"\n                    )}\n                  </Container>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          \"\"\n        )}\n      </SingleEventContext.Provider>\n    </>\n  );\n}\n\nexport default EventDash;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}