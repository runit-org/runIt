{"ast":null,"code":"import axios from \"axios\";\nimport { GET_USERS, GET_USER, GET_ERRORS, SET_CURRENT_USER } from \"./types\";\nimport setToken from \"../securityUtils/setToken\";\nimport jwt_decode from \"jwt-decode\";\nimport { useNavigate } from \"react-router-dom\";\nexport const getUsers = () => async dispatch => {\n  const res = await axios.get(`http://localhost:8000/api/user/all/`); // console.log(res)\n\n  dispatch({\n    type: GET_USERS,\n    payload: res.data\n  });\n};\nexport const login = LoginRequest => {\n  var _s = $RefreshSig$();\n\n  return _s(async dispatch => {\n    _s();\n\n    try {\n      //post => login request\n      const res = await axios.post(\"http://localhost:8000/api/auth/login/\", LoginRequest);\n      let navigate = useNavigate();\n      navigate('posts'); // alert(\"Login Success\")\n\n      console.log(res); //extract token from data\n\n      const token = res.data.access; //store token in local storage\n\n      localStorage.setItem(\"token\", token); //set token in header\n\n      setToken(token); //get data from response\n\n      const decoded = {\n        username: res.data.username\n      };\n      localStorage.setItem(\"username\", decoded.username); //dispatch to securityReducer\n\n      dispatch({\n        type: GET_ERRORS,\n        payload: {}\n      });\n      dispatch({\n        type: SET_CURRENT_USER,\n        payload: decoded\n      });\n    } catch (error) {\n      dispatch({\n        type: GET_ERRORS,\n        payload: error.response.data\n      });\n    }\n  }, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n};\n/* export const getUser = () => async (dispatch) => {\n  const res = await axios.get(`http://localhost:8000/api/user/`);\n  dispatch({\n    type: GET_USER,\n    payload: res.data,\n  });\n}; */","map":{"version":3,"sources":["/Users/mananlodhia/Desktop/Projects/EventMatcher/frontend/frontend/src/actions/securityActions.js"],"names":["axios","GET_USERS","GET_USER","GET_ERRORS","SET_CURRENT_USER","setToken","jwt_decode","useNavigate","getUsers","dispatch","res","get","type","payload","data","login","LoginRequest","post","navigate","console","log","token","access","localStorage","setItem","decoded","username","error","response"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,EAA0CC,gBAA1C,QAAkE,SAAlE;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAChD,QAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAW,qCAAX,CAAlB,CADgD,CAEhD;;AACAF,EAAAA,QAAQ,CAAC;AACPG,IAAAA,IAAI,EAAEX,SADC;AAEPY,IAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,GAAD,CAAR;AAID,CAPM;AASP,OAAO,MAAMC,KAAK,GAAIC,YAAD;AAAA;;AAAA,YAAkB,MAAOP,QAAP,IAAoB;AAAA;;AACzD,QAAI;AACF;AACA,YAAMC,GAAG,GAAG,MAAMV,KAAK,CAACiB,IAAN,CAChB,uCADgB,EAEhBD,YAFgB,CAAlB;AAIA,UAAIE,QAAQ,GAAGX,WAAW,EAA1B;AACAW,MAAAA,QAAQ,CAAC,OAAD,CAAR,CAPE,CASF;;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYV,GAAZ,EAXE,CAaF;;AACA,YAAMW,KAAK,GAAGX,GAAG,CAACI,IAAJ,CAASQ,MAAvB,CAdE,CAeF;;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,KAA9B,EAhBE,CAiBF;;AACAhB,MAAAA,QAAQ,CAACgB,KAAD,CAAR,CAlBE,CAmBF;;AACA,YAAMI,OAAO,GAAG;AACdC,QAAAA,QAAQ,EAAEhB,GAAG,CAACI,IAAJ,CAASY;AADL,OAAhB;AAIAH,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,OAAO,CAACC,QAAzC,EAxBE,CA0BF;;AACAjB,MAAAA,QAAQ,CAAC;AACPG,QAAAA,IAAI,EAAET,UADC;AAEPU,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAIAJ,MAAAA,QAAQ,CAAC;AACPG,QAAAA,IAAI,EAAER,gBADC;AAEPS,QAAAA,OAAO,EAAEY;AAFF,OAAD,CAAR;AAID,KAnCD,CAmCE,OAAOE,KAAP,EAAc;AACdlB,MAAAA,QAAQ,CAAC;AACPG,QAAAA,IAAI,EAAET,UADC;AAEPU,QAAAA,OAAO,EAAEc,KAAK,CAACC,QAAN,CAAed;AAFjB,OAAD,CAAR;AAID;AACF,GA1CoB;AAAA,YAOFP,WAPE;AAAA;AAAA,CAAd;AA4CP;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from \"axios\";\nimport { GET_USERS, GET_USER, GET_ERRORS, SET_CURRENT_USER } from \"./types\";\nimport setToken from \"../securityUtils/setToken\";\nimport jwt_decode from \"jwt-decode\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport const getUsers = () => async (dispatch) => {\n  const res = await axios.get(`http://localhost:8000/api/user/all/`);\n  // console.log(res)\n  dispatch({\n    type: GET_USERS,\n    payload: res.data,\n  });\n};\n\nexport const login = (LoginRequest) => async (dispatch) => {\n  try {\n    //post => login request\n    const res = await axios.post(\n      \"http://localhost:8000/api/auth/login/\",\n      LoginRequest,\n    );\n    let navigate = useNavigate();\n    navigate('posts')\n\n    // alert(\"Login Success\")\n\n    console.log(res);\n\n    //extract token from data\n    const token = res.data.access;\n    //store token in local storage\n    localStorage.setItem(\"token\", token);\n    //set token in header\n    setToken(token);\n    //get data from response\n    const decoded = {\n      username: res.data.username,\n    };\n\n    localStorage.setItem(\"username\", decoded.username);\n\n    //dispatch to securityReducer\n    dispatch({\n      type: GET_ERRORS,\n      payload: {},\n    });\n    dispatch({\n      type: SET_CURRENT_USER,\n      payload: decoded,\n    });\n  } catch (error) {\n    dispatch({\n      type: GET_ERRORS,\n      payload: error.response.data,\n    });\n  }\n};\n\n/* export const getUser = () => async (dispatch) => {\n  const res = await axios.get(`http://localhost:8000/api/user/`);\n  dispatch({\n    type: GET_USER,\n    payload: res.data,\n  });\n}; */\n"]},"metadata":{},"sourceType":"module"}