{"ast":null,"code":"var _jsxFileName = \"/Users/Manan/Desktop/runIt/frontend/src/layouts/header.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Navbar, Container, Nav, NavDropdown } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout } from \"../actions/securityActions\";\nimport Notifications from \"../components/Notification/notification\";\nimport { getCurrentUserProfile } from \"../actions/userActions\";\nimport { receiver } from \"../components/client/socket\";\nimport { getNotifications } from \"../actions/notificationActions\";\nimport { AppLogo, Notification } from \"./icons\";\nimport Cookies from \"js-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Header() {\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [showNotif, setShowNotif] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [notifs, setNotifData] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(\"\");\n  useEffect(() => {\n    dispatch(getCurrentUserProfile());\n  }, [dispatch]);\n  const handleNotifShow = () => setShowNotif(true);\n  const handleNotifClose = () => setShowNotif(false);\n  const handleLogout = e => {\n    e.preventDefault();\n    const token = Cookies.get(\"token\");\n    const refToken = {\n      refresh: token\n    };\n    dispatch(logout(refToken, navigate));\n  };\n  var currProfile = useSelector(securityReducer => securityReducer.users.currProfile);\n  useEffect(() => {\n    if (currProfile) {\n      setCurrentUser(currProfile.data);\n    }\n  }, [currProfile]);\n  useEffect(() => {\n    dispatch(getNotifications());\n  }, [dispatch]);\n  var notifications = useSelector(notificationReducer => notificationReducer.notifications.notifs.results);\n  useEffect(() => {\n    if (notifications) {\n      setNotifData(notifications);\n    }\n  }, [notifications]);\n  useEffect(() => {\n    setUnreadCount(notifs.filter(notif => notif.statusName === \"UNREAD\").length);\n  }, [notifs]);\n  useEffect(() => {\n    receiver(dispatch);\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Notifications, {\n      notifShow: showNotif,\n      close: handleNotifClose,\n      notifs: notifs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n      collapseOnSelect: true,\n      expand: \"xl\",\n      variant: \"light\",\n      fixed: \"top\",\n      className: \"header-blur\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n          href: \"/posts\",\n          children: /*#__PURE__*/_jsxDEV(AppLogo, {\n            w: \"50px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Navbar.Toggle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Navbar.Collapse, {\n          className: \"justify-content-end\",\n          children: /*#__PURE__*/_jsxDEV(Navbar.Text, {\n            id: \"nav-end-items\",\n            children: /*#__PURE__*/_jsxDEV(Nav, {\n              className: \"me-aut align-items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                href: \"/posts\",\n                children: \"Dashboard\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n                onClick: handleNotifShow,\n                id: \"notification-icon\",\n                children: [/*#__PURE__*/_jsxDEV(Notification, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }, this), notifs ? unreadCount > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"notification-badge\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 23\n                }, this) : \"\" : \"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(NavDropdown, {\n                title: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: currentUser ? currentUser.gravatarImage : \"\",\n                  className: \"nav_userProf\",\n                  alt: \"Img\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 21\n                }, this),\n                id: \"basic-nav-dropdown\",\n                children: [/*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                  href: currentUser ? `/profile?user=${currentUser.username}` : \"\",\n                  children: \"Profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(NavDropdown.Item, {\n                  onClick: e => {\n                    handleLogout(e);\n                  },\n                  children: \"Logout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\nexport default Header;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Container","Nav","NavDropdown","useNavigate","useDispatch","useSelector","logout","Notifications","getCurrentUserProfile","receiver","getNotifications","AppLogo","Notification","Cookies","jsxDEV","_jsxDEV","Header","navigate","dispatch","showNotif","setShowNotif","currentUser","setCurrentUser","notifs","setNotifData","unreadCount","setUnreadCount","handleNotifShow","handleNotifClose","handleLogout","e","preventDefault","token","get","refToken","refresh","currProfile","securityReducer","users","data","notifications","notificationReducer","results","filter","notif","statusName","length","children","notifShow","close","fileName","_jsxFileName","lineNumber","columnNumber","collapseOnSelect","expand","variant","fixed","className","Brand","href","w","Toggle","Collapse","Text","id","Link","onClick","title","src","gravatarImage","alt","Item","username"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/layouts/header.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Navbar, Container, Nav, NavDropdown } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout } from \"../actions/securityActions\";\nimport Notifications from \"../components/Notification/notification\";\nimport { getCurrentUserProfile } from \"../actions/userActions\";\nimport { receiver } from \"../components/client/socket\";\nimport { getNotifications } from \"../actions/notificationActions\";\nimport { AppLogo, Notification } from \"./icons\";\nimport Cookies from \"js-cookie\";\n\nfunction Header() {\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [showNotif, setShowNotif] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [notifs, setNotifData] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(\"\");\n\n  useEffect(() => {\n    dispatch(getCurrentUserProfile());\n  }, [dispatch]);\n\n  const handleNotifShow = () => setShowNotif(true);\n  const handleNotifClose = () => setShowNotif(false);\n\n  const handleLogout = (e) => {\n    e.preventDefault();\n    const token = Cookies.get(\"token\");\n\n    const refToken = {\n      refresh: token,\n    };\n\n    dispatch(logout(refToken, navigate));\n  };\n\n  var currProfile = useSelector(\n    (securityReducer) => securityReducer.users.currProfile\n  );\n\n  useEffect(() => {\n    if (currProfile) {\n      setCurrentUser(currProfile.data);\n    }\n  }, [currProfile]);\n\n  useEffect(() => {\n    dispatch(getNotifications());\n  }, [dispatch]);\n\n  var notifications = useSelector(\n    (notificationReducer) => notificationReducer.notifications.notifs.results\n  );\n\n  useEffect(() => {\n    if (notifications) {\n      setNotifData(notifications);\n    }\n  }, [notifications]);\n\n  useEffect(() => {\n    setUnreadCount(\n      notifs.filter((notif) => notif.statusName === \"UNREAD\").length\n    );\n  }, [notifs]);\n\n  useEffect(() => {\n    receiver(dispatch);\n  }, [dispatch]);\n\n  return (\n    <div>\n      <Notifications\n        notifShow={showNotif}\n        close={handleNotifClose}\n        notifs={notifs}\n      />\n      <Navbar\n        collapseOnSelect\n        expand=\"xl\"\n        variant=\"light\"\n        fixed=\"top\"\n        className=\"header-blur\"\n      >\n        <Container>\n          <Navbar.Brand href=\"/posts\">\n            <AppLogo w={\"50px\"} />\n          </Navbar.Brand>\n          <Navbar.Toggle />\n          <Navbar.Collapse className=\"justify-content-end\">\n            <Navbar.Text id=\"nav-end-items\">\n              <Nav className=\"me-aut align-items-center gap-3\">\n                <Nav.Link href=\"/posts\">Dashboard</Nav.Link>\n                <Nav.Link onClick={handleNotifShow} id=\"notification-icon\">\n                  <Notification />\n                  {notifs ? (\n                    unreadCount > 0 ? (\n                      <div className=\"notification-badge\" />\n                    ) : (\n                      \"\"\n                    )\n                  ) : (\n                    \"\"\n                  )}\n                </Nav.Link>\n\n                <NavDropdown\n                  title={\n                    <img\n                      src={currentUser ? currentUser.gravatarImage : \"\"}\n                      className=\"nav_userProf\"\n                      alt=\"Img\"\n                    />\n                  }\n                  id=\"basic-nav-dropdown\"\n                >\n                  <NavDropdown.Item\n                    href={\n                      currentUser ? `/profile?user=${currentUser.username}` : \"\"\n                    }\n                  >\n                    Profile\n                  </NavDropdown.Item>\n                  <NavDropdown.Item\n                    onClick={(e) => {\n                      handleLogout(e);\n                    }}\n                  >\n                    Logout\n                  </NavDropdown.Item>\n                </NavDropdown>\n              </Nav>\n            </Navbar.Text>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    </div>\n  );\n}\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}