{"ast":null,"code":"import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Offcanvas,Button}from\"react-bootstrap\";import{useDispatch}from\"react-redux\";import{notificationRead,notificationRead_all}from\"../../actions/notificationActions\";import{VscCircleFilled}from\"react-icons/vsc\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Notifications(props){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),read=_useState2[0],setRead=_useState2[1];useEffect(function(){if(read.read){dispatch(notificationRead(read.read)).then(function(){if(read.link){navigate(read.link);}});}},[read,navigate,dispatch]);var handleReadall=function handleReadall(){dispatch(notificationRead_all());};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Offcanvas,{show:props.notifShow,placement:\"end\",onHide:props.close,children:[/*#__PURE__*/_jsx(Offcanvas.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Offcanvas.Title,{className:\"fw-bold\",children:\"Notifications\"})}),/*#__PURE__*/_jsxs(Offcanvas.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notif-subHeader\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"me-auto text-muted\",children:[props.notifs.filter(function(notif){return notif.statusName===\"UNREAD\";}).length>0?props.notifs.filter(function(notif){return notif.statusName===\"UNREAD\";}).length:\"No\",\" \",\"new notifications\"]}),/*#__PURE__*/_jsx(\"small\",{className:\"float-end\",children:/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"link p-0\",onClick:function onClick(){handleReadall();},children:\"Mark all as read\"})}),/*#__PURE__*/_jsx(\"hr\",{})]}),props.notifs&&props.notifs.length>0?props.notifs.map(function(notif,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Button,{variant:\"link\",className:\"notif-button-item\",onClick:function onClick(){setRead({read:notif.id,link:notif.link});},children:[/*#__PURE__*/_jsx(\"small\",{className:\"notif-mark float-end\",children:notif.statusName===\"UNREAD\"?/*#__PURE__*/_jsx(VscCircleFilled,{}):\"\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"small\",{dangerouslySetInnerHTML:{__html:notif.details}})}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[notif.humanTimeDiffCreatedAt,\" ago\"]}),/*#__PURE__*/_jsx(\"hr\",{})]})},index);}):\"\"]})]})});}export default Notifications;","map":{"version":3,"names":["React","useState","useEffect","Offcanvas","Button","useDispatch","notificationRead","notificationRead_all","VscCircleFilled","useNavigate","jsx","_jsx","jsxs","_jsxs","Notifications","props","dispatch","navigate","_useState","_useState2","_slicedToArray","read","setRead","then","link","handleReadall","children","show","notifShow","placement","onHide","close","Header","closeButton","Title","className","Body","notifs","filter","notif","statusName","length","size","variant","onClick","map","index","id","dangerouslySetInnerHTML","__html","details","humanTimeDiffCreatedAt"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/Notification/notification.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Offcanvas, Button } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  notificationRead,\n  notificationRead_all,\n} from \"../../actions/notificationActions\";\nimport { VscCircleFilled } from \"react-icons/vsc\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Notifications(props) {\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [read, setRead] = useState({});\n\n  useEffect(() => {\n    if (read.read) {\n      dispatch(notificationRead(read.read)).then(() => {\n        if (read.link) {\n          navigate(read.link);\n        }\n      });\n    }\n  }, [read, navigate, dispatch]);\n\n  const handleReadall = () => {\n    dispatch(notificationRead_all());\n  };\n\n  return (\n    <div>\n      <Offcanvas show={props.notifShow} placement={\"end\"} onHide={props.close}>\n        <Offcanvas.Header closeButton>\n          <Offcanvas.Title className=\"fw-bold\">Notifications</Offcanvas.Title>\n        </Offcanvas.Header>\n        <Offcanvas.Body>\n          <div className=\"notif-subHeader\">\n            <small className=\"me-auto text-muted\">\n              {props.notifs.filter((notif) => notif.statusName === \"UNREAD\")\n                .length > 0\n                ? props.notifs.filter((notif) => notif.statusName === \"UNREAD\")\n                    .length\n                : \"No\"}{\" \"}\n              new notifications\n            </small>\n            <small className=\"float-end\">\n              <Button\n                size=\"sm\"\n                variant=\"link p-0\"\n                onClick={() => {\n                  handleReadall();\n                }}\n              >\n                Mark all as read\n              </Button>\n            </small>\n            <hr />\n          </div>\n\n          {props.notifs && props.notifs.length > 0\n            ? props.notifs.map((notif, index) => {\n                return (\n                  <div key={index}>\n                    <Button\n                      variant=\"link\"\n                      className=\"notif-button-item\"\n                      onClick={() => {\n                        setRead({ read: notif.id, link: notif.link });\n                      }}\n                    >\n                      <small className=\"notif-mark float-end\">\n                        {notif.statusName === \"UNREAD\" ? (\n                          <VscCircleFilled />\n                        ) : (\n                          \"\"\n                        )}\n                      </small>\n                      <div>\n                        <small\n                          dangerouslySetInnerHTML={{ __html: notif.details }}\n                        />\n                      </div>\n\n                      <small className=\"text-muted\">\n                        {notif.humanTimeDiffCreatedAt} ago\n                      </small>\n                      <hr />\n                    </Button>\n                  </div>\n                );\n              })\n            : \"\"}\n        </Offcanvas.Body>\n      </Offcanvas>\n    </div>\n  );\n}\n\nexport default Notifications;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}