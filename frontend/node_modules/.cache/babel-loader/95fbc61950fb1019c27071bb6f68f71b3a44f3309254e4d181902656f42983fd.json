{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{Button,Form}from\"react-bootstrap\";import{useDispatch}from\"react-redux\";import{getSingleEvent,updateStatus}from\"../../actions/eventActions\";import{Loading}from\"../../layouts/loader\";import ModalItem from\"./modal-item\";import{useParams}from\"react-router-dom\";import{emitter}from\"../client/socket\";import{PencilSquare}from\"../../layouts/icons\";import{CANCELLED,FINISHED}from\"./utilities/types\";import{EventMembersHandler}from\"./utilities/action-handlers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EventStatus(props){var dispatch=useDispatch();var ref=/*#__PURE__*/React.createRef();var btnRef=useRef();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var params=useParams();var eventMembers=EventMembersHandler(props.eventId);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var postData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();postData={status:status};dispatch(updateStatus(props.eventId,postData,setLoad,setError)).then(function(){dispatch(getSingleEvent(params.id));emitter(eventMembers.map(function(member){return member.username;}));});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ModalItem,{ref:(ref,btnRef),customBtn:\"\",btnIcon:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(PencilSquare,{}),\"Status\"]}),error:error,title:\"Update Status\",content:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(Form.Label,{className:\"m-1\",children:[\"Mark your event as \",/*#__PURE__*/_jsx(\"strong\",{children:\"FINISHED\"}),\" or\",\" \",/*#__PURE__*/_jsx(\"strong\",{children:\"CANCELLED\"})]}),/*#__PURE__*/_jsx(Form.Control,{type:\"title\",placeholder:\"Christmas social\",pattern:\"(FINISHED|CANCELLED)\",onChange:function onChange(e){return setStatus(e.target.value===FINISHED?2:e.target.value===CANCELLED?3:\"\");},required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Note: The event status can only be updated once.\"})})]}),subBtn:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Button,{className:\"me-3 btn-cancel\",onClick:function onClick(){return btnRef.current.setModalShow(false);},children:\"Back\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:function(){if(load){return/*#__PURE__*/_jsx(Loading,{});}else{return/*#__PURE__*/_jsx(_Fragment,{children:\"Update\"});}}()})]}),subHandler:handleSubmit})});}export default EventStatus;","map":{"version":3,"names":["React","useState","useRef","Button","Form","useDispatch","getSingleEvent","updateStatus","Loading","ModalItem","useParams","emitter","PencilSquare","CANCELLED","FINISHED","EventMembersHandler","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EventStatus","props","dispatch","ref","createRef","btnRef","_useState","_useState2","_slicedToArray","status","setStatus","_useState3","_useState4","load","setLoad","_useState5","_useState6","error","setError","params","eventMembers","eventId","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","postData","wrap","_callee$","_context","prev","next","preventDefault","then","id","map","member","username","stop","_x","apply","arguments","children","customBtn","btnIcon","className","title","content","Group","Label","Control","type","placeholder","pattern","onChange","target","value","required","subBtn","onClick","current","setModalShow","subHandler"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/Event/event-status.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { getSingleEvent, updateStatus } from \"../../actions/eventActions\";\nimport { Loading } from \"../../layouts/loader\";\nimport ModalItem from \"./modal-item\";\nimport { useParams } from \"react-router-dom\";\nimport { emitter } from \"../client/socket\";\nimport { PencilSquare } from \"../../layouts/icons\";\nimport { CANCELLED, FINISHED } from \"./utilities/types\";\nimport { EventMembersHandler } from \"./utilities/action-handlers\";\n\nfunction EventStatus(props) {\n  const dispatch = useDispatch();\n  const ref = React.createRef();\n  const btnRef = useRef();\n  const [status, setStatus] = useState(\"\");\n  const [load, setLoad] = useState(false);\n  const [error, setError] = useState({});\n\n  const params = useParams();\n\n  const eventMembers = EventMembersHandler(props.eventId);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const postData = {\n      status: status,\n    };\n\n    dispatch(updateStatus(props.eventId, postData, setLoad, setError)).then(\n      () => {\n        dispatch(getSingleEvent(params.id));\n        emitter(eventMembers.map((member) => member.username));\n      }\n    );\n  };\n  return (\n    <>\n      <ModalItem\n        ref={(ref, btnRef)}\n        customBtn={\"\"}\n        btnIcon={\n          <div className=\"d-flex align-items-center\">\n            <PencilSquare />\n            Status\n          </div>\n        }\n        error={error}\n        title={\"Update Status\"}\n        content={\n          <>\n            <Form.Group className=\"mb-3\">\n              <Form.Label className=\"m-1\">\n                Mark your event as <strong>FINISHED</strong> or{\" \"}\n                <strong>CANCELLED</strong>\n              </Form.Label>\n              <Form.Control\n                type=\"title\"\n                placeholder=\"Christmas social\"\n                pattern=\"(FINISHED|CANCELLED)\"\n                onChange={(e) =>\n                  setStatus(\n                    e.target.value === FINISHED\n                      ? 2\n                      : e.target.value === CANCELLED\n                      ? 3\n                      : \"\"\n                  )\n                }\n                required\n              />\n            </Form.Group>\n            <div className=\"mt-2\">\n              <small className=\"text-muted\">\n                Note: The event status can only be updated once.\n              </small>\n            </div>\n          </>\n        }\n        subBtn={\n          <div>\n            <hr />\n            <Button\n              className=\"me-3 btn-cancel\"\n              onClick={() => btnRef.current.setModalShow(false)}\n            >\n              Back\n            </Button>\n            <Button type=\"submit\">\n              {(() => {\n                if (load) {\n                  return <Loading />;\n                } else {\n                  return <>Update</>;\n                }\n              })()}\n            </Button>\n          </div>\n        }\n        subHandler={handleSubmit}\n      />\n    </>\n  );\n}\n\nexport default EventStatus;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}