{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{Button,ButtonGroup,Card}from\"react-bootstrap\";import{useDispatch}from\"react-redux\";import{memberStatus}from\"../../actions/eventActions\";import{Loading}from\"../../layouts/loader\";import{Link}from\"react-router-dom\";import{emitter}from\"../client/socket\";import{EventMembersHandler}from\"./utilities/action-handlers\";import{Pending}from\"./utilities/event-builder\";import{SingleEventContext}from\"../Dashboards/event-dash\";import{Cross,Tick}from\"../../layouts/icons\";import{DisplayImage}from\"../../layouts/user-displayimg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ManageMembers(props){var dispatch=useDispatch();var eventData=useContext(SingleEventContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var eventMembers=EventMembersHandler(eventData.id);var pendingMembers=Pending(eventMembers,props.currentUser);var manageUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(status,memberId){var postData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:postData={eventId:eventData.id,userId:memberId,status:status};dispatch(memberStatus(postData,setLoad)).then(function(){emitter(pendingMembers.map(function(member){return member.username;}));});case 2:case\"end\":return _context.stop();}},_callee);}));return function manageUser(_x,_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Card,{className:\"event-card\",children:[/*#__PURE__*/_jsx(Card.Header,{children:\"New requests\"}),/*#__PURE__*/_jsx(Card.Body,{children:pendingMembers.length>0?pendingMembers.map(function(member){return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex userInfo-div  justify-content-between\",style:{padding:\" 20px 10px 10px 20px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(DisplayImage,{image:member.gravatarImage}),/*#__PURE__*/_jsxs(\"div\",{className:\"ms-4\",children:[/*#__PURE__*/_jsxs(Link,{to:{pathname:\"/profile\",search:\"user=\".concat(member.username)},children:[\"@\",member.username]}),/*#__PURE__*/_jsx(\"small\",{className:\"d-block text-muted\",children:member.email})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsxs(ButtonGroup,{\"aria-label\":\"Basic example\",className:\"w-100 gap-1\",children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"postBtn-placements cta_button\",onClick:function onClick(){return manageUser(1,member.userId);},children:function(){if(load){return/*#__PURE__*/_jsx(Loading,{});}else{return/*#__PURE__*/_jsx(\"span\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(Tick,{})});}}()}),/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"postBtn-placements cta_button\",onClick:function onClick(){return manageUser(2,member.userId);},children:function(){if(load){return/*#__PURE__*/_jsx(Loading,{});}else{return/*#__PURE__*/_jsx(\"span\",{className:\"d-flex align-items-center\",children:/*#__PURE__*/_jsx(Cross,{type:\"custom\"})});}}()})]})})]},member.id);}):\"No new requests..\"})]});}export default ManageMembers;","map":{"version":3,"names":["React","useContext","useState","Button","ButtonGroup","Card","useDispatch","memberStatus","Loading","Link","emitter","EventMembersHandler","Pending","SingleEventContext","Cross","Tick","DisplayImage","jsx","_jsx","jsxs","_jsxs","ManageMembers","props","dispatch","eventData","_useState","_useState2","_slicedToArray","load","setLoad","eventMembers","id","pendingMembers","currentUser","manageUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","status","memberId","postData","wrap","_callee$","_context","prev","next","eventId","userId","then","map","member","username","stop","_x","_x2","apply","arguments","className","children","Header","Body","length","style","padding","image","gravatarImage","to","pathname","search","concat","email","variant","onClick","type"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/Event/manage-members.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { Button, ButtonGroup, Card } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport { memberStatus } from \"../../actions/eventActions\";\nimport { Loading } from \"../../layouts/loader\";\nimport { Link } from \"react-router-dom\";\nimport { emitter } from \"../client/socket\";\nimport { EventMembersHandler } from \"./utilities/action-handlers\";\nimport { Pending } from \"./utilities/event-builder\";\nimport { SingleEventContext } from \"../Dashboards/event-dash\";\nimport { Cross, Tick } from \"../../layouts/icons\";\nimport { DisplayImage } from \"../../layouts/user-displayimg\";\n\nfunction ManageMembers(props) {\n  const dispatch = useDispatch();\n  const eventData = useContext(SingleEventContext);\n\n  const [load, setLoad] = useState(false);\n  const eventMembers = EventMembersHandler(eventData.id);\n  const pendingMembers = Pending(eventMembers, props.currentUser);\n\n  const manageUser = async (status, memberId) => {\n    const postData = {\n      eventId: eventData.id,\n      userId: memberId,\n      status: status,\n    };\n\n    dispatch(memberStatus(postData, setLoad)).then(() => {\n      emitter(pendingMembers.map((member) => member.username));\n    });\n  };\n\n  return (\n    <Card className=\"event-card\">\n      <Card.Header>New requests</Card.Header>\n\n      <Card.Body>\n        {pendingMembers.length > 0\n          ? pendingMembers.map((member) => {\n              return (\n                <div\n                  key={member.id}\n                  className=\"d-flex userInfo-div  justify-content-between\"\n                  style={{ padding: \" 20px 10px 10px 20px\" }}\n                >\n                  <div className=\"d-flex align-items-center\">\n                    <DisplayImage image={member.gravatarImage} />\n\n                    <div className=\"ms-4\">\n                      <Link\n                        to={{\n                          pathname: \"/profile\",\n                          search: `user=${member.username}`,\n                        }}\n                      >\n                        @{member.username}\n                      </Link>\n\n                      <small className=\"d-block text-muted\">\n                        {member.email}\n                      </small>\n                    </div>\n                  </div>\n                  <div className=\"d-flex align-items-center\">\n                    <ButtonGroup\n                      aria-label=\"Basic example\"\n                      className=\"w-100 gap-1\"\n                    >\n                      <Button\n                        variant=\"light\"\n                        className=\"postBtn-placements cta_button\"\n                        onClick={() => manageUser(1, member.userId)}\n                      >\n                        {(() => {\n                          if (load) {\n                            return <Loading />;\n                          } else {\n                            return (\n                              <span className=\"d-flex align-items-center\">\n                                <Tick />\n                              </span>\n                            );\n                          }\n                        })()}\n                      </Button>\n                      <Button\n                        variant=\"light\"\n                        className=\"postBtn-placements cta_button\"\n                        onClick={() => manageUser(2, member.userId)}\n                      >\n                        {(() => {\n                          if (load) {\n                            return <Loading />;\n                          } else {\n                            return (\n                              <span className=\"d-flex align-items-center\">\n                                <Cross type=\"custom\" />\n                              </span>\n                            );\n                          }\n                        })()}\n                      </Button>\n                    </ButtonGroup>\n                  </div>\n                </div>\n              );\n            })\n          : \"No new requests..\"}\n      </Card.Body>\n    </Card>\n  );\n}\n\nexport default ManageMembers;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}