{"ast":null,"code":"import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Navbar,Container,Nav,NavDropdown}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{logout}from\"../actions/securityActions\";import Notifications from\"../components/Notification/notification\";import{getCurrentUserProfile}from\"../actions/userActions\";import{receiver}from\"../components/client/socket\";import{getNotifications}from\"../actions/notificationActions\";import{AppLogo,Notification}from\"./icons\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){var navigate=useNavigate();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showNotif=_useState2[0],setShowNotif=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),notifs=_useState6[0],setNotifData=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),unreadCount=_useState8[0],setUnreadCount=_useState8[1];useEffect(function(){dispatch(getCurrentUserProfile());},[dispatch]);var handleNotifShow=function handleNotifShow(){return setShowNotif(true);};var handleNotifClose=function handleNotifClose(){return setShowNotif(false);};var handleLogout=function handleLogout(e){e.preventDefault();var token=Cookies.get(\"token\");var refToken={refresh:token};dispatch(logout(refToken,navigate));};var currProfile=useSelector(function(securityReducer){return securityReducer.users.currProfile;});useEffect(function(){if(currProfile){setCurrentUser(currProfile.data);}},[currProfile]);useEffect(function(){dispatch(getNotifications());},[dispatch]);var notifications=useSelector(function(notificationReducer){return notificationReducer.notifications.notifs.results;});useEffect(function(){if(notifications){setNotifData(notifications);}},[notifications]);useEffect(function(){setUnreadCount(notifs.filter(function(notif){return notif.statusName===\"UNREAD\";}).length);},[notifs]);useEffect(function(){receiver(dispatch);},[dispatch]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notifications,{notifShow:showNotif,close:handleNotifClose,notifs:notifs}),/*#__PURE__*/_jsx(Navbar,{collapseOnSelect:true,expand:\"xl\",variant:\"light\",fixed:\"top\",className:\"header-blur\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{href:\"/posts\",children:/*#__PURE__*/_jsx(AppLogo,{w:\"50px\"})}),/*#__PURE__*/_jsx(Navbar.Toggle,{}),/*#__PURE__*/_jsx(Navbar.Collapse,{className:\"justify-content-end\",children:/*#__PURE__*/_jsx(Navbar.Text,{id:\"nav-end-items\",children:/*#__PURE__*/_jsxs(Nav,{className:\"me-aut align-items-center gap-3\",children:[/*#__PURE__*/_jsx(Nav.Link,{href:\"/posts\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(Nav.Link,{onClick:handleNotifShow,id:\"notification-icon\",children:[/*#__PURE__*/_jsx(Notification,{}),notifs?unreadCount>0?/*#__PURE__*/_jsx(\"div\",{className:\"notification-badge\"}):\"\":\"\"]}),/*#__PURE__*/_jsxs(NavDropdown,{title:/*#__PURE__*/_jsx(\"img\",{src:currentUser?currentUser.gravatarImage:\"\",className:\"nav_userProf\",alt:\"Img\"}),id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{href:currentUser?\"/profile?user=\".concat(currentUser.username):\"\",children:\"Profile\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{onClick:function onClick(e){handleLogout(e);},children:\"Logout\"})]})]})})})]})})]});}export default Header;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Container","Nav","NavDropdown","useNavigate","useDispatch","useSelector","logout","Notifications","getCurrentUserProfile","receiver","getNotifications","AppLogo","Notification","Cookies","jsx","_jsx","jsxs","_jsxs","Header","navigate","dispatch","_useState","_useState2","_slicedToArray","showNotif","setShowNotif","_useState3","_useState4","currentUser","setCurrentUser","_useState5","_useState6","notifs","setNotifData","_useState7","_useState8","unreadCount","setUnreadCount","handleNotifShow","handleNotifClose","handleLogout","e","preventDefault","token","get","refToken","refresh","currProfile","securityReducer","users","data","notifications","notificationReducer","results","filter","notif","statusName","length","children","notifShow","close","collapseOnSelect","expand","variant","fixed","className","Brand","href","w","Toggle","Collapse","Text","id","Link","onClick","title","src","gravatarImage","alt","Item","concat","username"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/layouts/header.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Navbar, Container, Nav, NavDropdown } from \"react-bootstrap\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout } from \"../actions/securityActions\";\nimport Notifications from \"../components/Notification/notification\";\nimport { getCurrentUserProfile } from \"../actions/userActions\";\nimport { receiver } from \"../components/client/socket\";\nimport { getNotifications } from \"../actions/notificationActions\";\nimport { AppLogo, Notification } from \"./icons\";\nimport Cookies from \"js-cookie\";\n\nfunction Header() {\n  let navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [showNotif, setShowNotif] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n  const [notifs, setNotifData] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(\"\");\n\n  useEffect(() => {\n    dispatch(getCurrentUserProfile());\n  }, [dispatch]);\n\n  const handleNotifShow = () => setShowNotif(true);\n  const handleNotifClose = () => setShowNotif(false);\n\n  const handleLogout = (e) => {\n    e.preventDefault();\n    const token = Cookies.get(\"token\");\n\n    const refToken = {\n      refresh: token,\n    };\n\n    dispatch(logout(refToken, navigate));\n  };\n\n  var currProfile = useSelector(\n    (securityReducer) => securityReducer.users.currProfile\n  );\n\n  useEffect(() => {\n    if (currProfile) {\n      setCurrentUser(currProfile.data);\n    }\n  }, [currProfile]);\n\n  useEffect(() => {\n    dispatch(getNotifications());\n  }, [dispatch]);\n\n  var notifications = useSelector(\n    (notificationReducer) => notificationReducer.notifications.notifs.results\n  );\n\n  useEffect(() => {\n    if (notifications) {\n      setNotifData(notifications);\n    }\n  }, [notifications]);\n\n  useEffect(() => {\n    setUnreadCount(\n      notifs.filter((notif) => notif.statusName === \"UNREAD\").length\n    );\n  }, [notifs]);\n\n  useEffect(() => {\n    receiver(dispatch);\n  }, [dispatch]);\n\n  return (\n    <div>\n      <Notifications\n        notifShow={showNotif}\n        close={handleNotifClose}\n        notifs={notifs}\n      />\n      <Navbar\n        collapseOnSelect\n        expand=\"xl\"\n        variant=\"light\"\n        fixed=\"top\"\n        className=\"header-blur\"\n      >\n        <Container>\n          <Navbar.Brand href=\"/posts\">\n            <AppLogo w={\"50px\"} />\n          </Navbar.Brand>\n          <Navbar.Toggle />\n          <Navbar.Collapse className=\"justify-content-end\">\n            <Navbar.Text id=\"nav-end-items\">\n              <Nav className=\"me-aut align-items-center gap-3\">\n                <Nav.Link href=\"/posts\">Dashboard</Nav.Link>\n                <Nav.Link onClick={handleNotifShow} id=\"notification-icon\">\n                  <Notification />\n                  {notifs ? (\n                    unreadCount > 0 ? (\n                      <div className=\"notification-badge\" />\n                    ) : (\n                      \"\"\n                    )\n                  ) : (\n                    \"\"\n                  )}\n                </Nav.Link>\n\n                <NavDropdown\n                  title={\n                    <img\n                      src={currentUser ? currentUser.gravatarImage : \"\"}\n                      className=\"nav_userProf\"\n                      alt=\"Img\"\n                    />\n                  }\n                  id=\"basic-nav-dropdown\"\n                >\n                  <NavDropdown.Item\n                    href={\n                      currentUser ? `/profile?user=${currentUser.username}` : \"\"\n                    }\n                  >\n                    Profile\n                  </NavDropdown.Item>\n                  <NavDropdown.Item\n                    onClick={(e) => {\n                      handleLogout(e);\n                    }}\n                  >\n                    Logout\n                  </NavDropdown.Item>\n                </NavDropdown>\n              </Nav>\n            </Navbar.Text>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n    </div>\n  );\n}\n\nexport default Header;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}