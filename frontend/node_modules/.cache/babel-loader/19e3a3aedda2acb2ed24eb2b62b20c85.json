{"ast":null,"code":"import axios from \"axios\";\nimport { isExpired } from \"react-jwt\";\n\nconst setToken = token => async () => {\n  const isMyTokenExpired = isExpired(token);\n\n  if (token && isMyTokenExpired) {\n    const refToken = {\n      refresh: localStorage.token\n    };\n    const res = await axios.post(\"http://localhost:8000/api/auth/token/refresh/\", refToken);\n    console.log(res);\n    axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + res.data.access;\n  } else if (token && !isMyTokenExpired) {\n    axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n\nexport default setToken;","map":{"version":3,"sources":["/Users/mananlodhia/Desktop/Projects/EventMatcher/frontend/frontend/src/securityUtils/setToken.js"],"names":["axios","isExpired","setToken","token","isMyTokenExpired","refToken","refresh","localStorage","res","post","console","log","defaults","headers","common","data","access"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,WAA1B;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW,YAAW;AACrC,QAAMC,gBAAgB,GAAGH,SAAS,CAACE,KAAD,CAAlC;;AAEA,MAAIA,KAAK,IAAIC,gBAAb,EAA+B;AAC7B,UAAMC,QAAQ,GAAG;AACfC,MAAAA,OAAO,EAAEC,YAAY,CAACJ;AADP,KAAjB;AAGA,UAAMK,GAAG,GAAG,MAAMR,KAAK,CAACS,IAAN,CAChB,+CADgB,EAEhBJ,QAFgB,CAAlB;AAIEK,IAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACFR,IAAAA,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IACE,YAAYN,GAAG,CAACO,IAAJ,CAASC,MADvB;AAED,GAXD,MAWO,IAAIb,KAAK,IAAI,CAACC,gBAAd,EAAgC;AACrCJ,IAAAA,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAYX,KAA7D;AACD,GAFM,MAEA;AACL,WAAOH,KAAK,CAACY,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD;AACF,CAnBD;;AAqBA,eAAeZ,QAAf","sourcesContent":["import axios from \"axios\";\nimport { isExpired } from \"react-jwt\";\n\nconst setToken = (token) => async ()=> {\n  const isMyTokenExpired = isExpired(token);\n\n  if (token && isMyTokenExpired) {\n    const refToken = {\n      refresh: localStorage.token,\n    };\n    const res = await axios.post(\n      \"http://localhost:8000/api/auth/token/refresh/\",\n      refToken\n    );\n      console.log(res)\n    axios.defaults.headers.common[\"Authorization\"] =\n      \"Bearer \" + res.data.access;\n  } else if (token && !isMyTokenExpired) {\n    axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n  } else {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n\nexport default setToken;\n"]},"metadata":{},"sourceType":"module"}