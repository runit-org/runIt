{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/Manan/Desktop/runIt/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch}from\"react-redux\";import{requestToJoin,getAllEvents,getSingleEvent}from\"../../actions/eventActions\";import{Loading}from\"../../layouts/loader\";import ModalItem from\"./modal-item\";import{SearchParam}from\"../Utilities/search-param\";import{useLocation,useParams}from\"react-router-dom\";import{emitter}from\"../client/socket\";import{Plus}from\"../../layouts/icons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function JoinEvent(props){var dispatch=useDispatch();var ref=/*#__PURE__*/React.createRef();var btnRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var pageId=SearchParam();var params=useParams();var location=useLocation();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var postData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();postData={eventId:props.eventId};dispatch(requestToJoin(postData,setLoad,setError)).then(function(){location.pathname.includes(\"event\")?dispatch(getSingleEvent(params.id)):dispatch(getAllEvents(pageId));emitter([props.userName]);});case 3:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ModalItem,{ref:(ref,btnRef),customBtn:\"cta_button\",btnStyleFull:props.btnStyleFull,btnIcon:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(Plus,{}),\"Join\"]}),error:error,title:\"Join Event\",content:/*#__PURE__*/_jsxs(_Fragment,{children:[\"Request to join \",/*#__PURE__*/_jsx(\"strong\",{children:props.eventTitle}),\"? The creator of this event will be notified.\"]}),subBtn:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Button,{className:\"me-3 btn-cancel\",onClick:function onClick(){return btnRef.current.setModalShow(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:function(){if(load){return/*#__PURE__*/_jsx(Loading,{});}else{return/*#__PURE__*/_jsx(_Fragment,{children:\"Join\"});}}()})]}),subHandler:handleSubmit})});}export default JoinEvent;","map":{"version":3,"names":["React","useState","useRef","Button","useDispatch","requestToJoin","getAllEvents","getSingleEvent","Loading","ModalItem","SearchParam","useLocation","useParams","emitter","Plus","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","JoinEvent","props","dispatch","ref","createRef","btnRef","_useState","_useState2","_slicedToArray","load","setLoad","_useState3","_useState4","error","setError","pageId","params","location","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","postData","wrap","_callee$","_context","prev","next","preventDefault","eventId","then","pathname","includes","id","userName","stop","_x","apply","arguments","children","customBtn","btnStyleFull","btnIcon","className","title","content","eventTitle","subBtn","onClick","current","setModalShow","type","subHandler"],"sources":["/Users/Manan/Desktop/runIt/frontend/src/components/Event/join-event.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  requestToJoin,\n  getAllEvents,\n  getSingleEvent,\n} from \"../../actions/eventActions\";\nimport { Loading } from \"../../layouts/loader\";\nimport ModalItem from \"./modal-item\";\nimport { SearchParam } from \"../Utilities/search-param\";\nimport { useLocation, useParams } from \"react-router-dom\";\nimport { emitter } from \"../client/socket\";\nimport { Plus } from \"../../layouts/icons\";\n\nfunction JoinEvent(props) {\n  const dispatch = useDispatch();\n  const ref = React.createRef();\n  const btnRef = useRef();\n  const [load, setLoad] = useState(false);\n  const [error, setError] = useState({});\n\n  let pageId = SearchParam();\n  const params = useParams();\n  const location = useLocation();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const postData = {\n      eventId: props.eventId,\n    };\n\n    dispatch(requestToJoin(postData, setLoad, setError)).then(() => {\n      location.pathname.includes(\"event\")\n        ? dispatch(getSingleEvent(params.id))\n        : dispatch(getAllEvents(pageId));\n      emitter([props.userName]);\n    });\n  };\n  return (\n    <>\n      <ModalItem\n        ref={(ref, btnRef)}\n        customBtn={\"cta_button\"}\n        btnStyleFull={props.btnStyleFull}\n        btnIcon={\n          <div className=\"d-flex align-items-center\">\n            <Plus />\n            Join\n          </div>\n        }\n        error={error}\n        title={\"Join Event\"}\n        content={\n          <>\n            Request to join <strong>{props.eventTitle}</strong>? The creator of\n            this event will be notified.\n          </>\n        }\n        subBtn={\n          <div>\n            <hr />\n            <Button\n              className=\"me-3 btn-cancel\"\n              onClick={() => btnRef.current.setModalShow(false)}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\">\n              {(() => {\n                if (load) {\n                  return <Loading />;\n                } else {\n                  return <>Join</>;\n                }\n              })()}\n            </Button>\n          </div>\n        }\n        subHandler={handleSubmit}\n      />\n    </>\n  );\n}\n\nexport default JoinEvent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}