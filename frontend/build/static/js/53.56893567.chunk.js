"use strict";(self.webpackChunkrunit=self.webpackChunkrunit||[]).push([[53],{1053:function(e,t,n){n.r(t),n.d(t,{SingleEventContext:function(){return Te},default:function(){return Fe}});var s=n(9439),a=n(2791),r=n(7022),i=n(5070),c=n(7689),l=n(1087),d=n(4165),o=n(5861),u=n(5313),m=n(5551),h=n(6030),x=n(4035),v=n(4680),j=n(2557),f=n(5892),p=n(271),g=n(6833),N=n(184);var Z=function(e){var t=(0,h.I0)(),n=(0,c.UO)(),r=(0,a.useState)(e.title),l=(0,s.Z)(r,2),Z=l[0],b=l[1],y=(0,a.useState)(e.maxMembers),C=(0,s.Z)(y,2),w=C[0],S=C[1],k=(0,a.useState)(e.details),I=(0,s.Z)(k,2),D=I[0],P=(I[1],function(){var s=(0,o.Z)((0,d.Z)().mark((function s(a){var r;return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),r={title:Z,maxMember:w,details:D},t((0,m.eJ)(e.eventId,r)).then((function(e){e.status===p.OK&&(t((0,m.Bk)(n.id)),(0,v.uY)((0,j.Mh)(D)))})),e.handleUpate();case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}());return(0,N.jsxs)(u.Z,{onSubmit:function(e){P(e)},children:[(0,N.jsxs)(i.Z,{className:e.cardStyle,children:[(0,N.jsx)(i.Z.Header,{className:"pb-0",children:(0,N.jsx)("h5",{className:"fw-bold m-0",children:"Update event"})}),(0,N.jsxs)(i.Z.Body,{children:[(0,N.jsxs)(u.Z.Group,{className:"d-flex gap-2 mb-3",children:[(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)(g.l,{children:"Title"}),(0,N.jsx)(u.Z.Control,{type:"title",placeholder:"Event Title",value:Z,onChange:function(e){return b(e.target.value)},required:!0})]}),(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsx)(g.l,{children:"Size"}),(0,N.jsx)(u.Z.Control,{type:"number",placeholder:"Maximum Members",value:w||"",onChange:function(e){return S(parseInt(e.target.value))},min:"2",required:!0})]})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,N.jsx)(x.Z,{type:"",btnStyle:"postBtn-placements",variant:"primary",onClick:e.handleUpate,placeholder:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(f.X1,{}),"Cancel"]})}),(0,N.jsx)(x.Z,{type:"submit",btnStyle:"postBtn-placements cta_button",variant:"primary",formValidation:""===Z||""===w||""===D||"<p><br></p>"===D,isLoading:"",placeholder:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(f.k4,{}),"Publish"]})})]})]})]})," "]})},b=n(1398),y=n(9235),C=n(8175),w=n(6217),S=n(5806);var k=function(){var e=a.createRef(),t=(0,a.useContext)(Te).eventMbs,n=(0,w.vi)(t);return(0,N.jsx)(C.Z,{ref:e,customBtn:"",btnIcon:(0,N.jsxs)("div",{className:"d-flex img-group",children:[n.slice(0,4).map((function(e){return(0,N.jsx)("img",{src:e.gravatarImage,className:"members-img ",alt:"Img"},e.id)})),n.length>4&&(0,N.jsxs)("span",{className:"members-count",children:["+",n.length-4]})]}),title:"Members",children:(0,N.jsx)(u.Z,{children:(0,N.jsx)("div",{className:"mt-3",children:0===t.length?(0,N.jsx)("strong",{children:"Nobody here yet...."}):(0,N.jsx)(b.Z,{className:"members-list",variant:"flush",children:n.map((function(e){return(0,N.jsx)(b.Z.Item,{children:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(y.Q,{image:e.gravatarImage}),(0,N.jsxs)("div",{className:"ms-4",children:[(0,N.jsxs)(l.rU,{to:{pathname:"/".concat(S.ih,"/").concat(S.L6),search:"user=".concat(e.username)},children:["@",e.username]}),(0,N.jsx)("small",{className:"d-block text-muted",children:e.email})]})]})},e.id)}))})})})})},I=n(3585),D=n(3360),P=n(1275),_=n(4855);var B=function(e){var t=(0,h.I0)(),n=(0,c.s0)(),r=(0,a.useRef)(),i=(0,a.useState)(!1),l=(0,s.Z)(i,2),x=l[0],v=l[1],j=function(){var s=(0,o.Z)((0,d.Z)().mark((function s(a){return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),t((0,m.xC)(e.eventId,v)).then((function(e){e.status===p.OK&&(t({type:_.jN}),n("/".concat(S.vA)))}));case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,N.jsx)(C.Z,{ref:r,customBtn:"",btnIcon:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Delete"}),title:"Delete Event",children:(0,N.jsxs)(u.Z,{onSubmit:function(e){j(e)},children:[(0,N.jsxs)("div",{className:"mt-3",children:[(0,N.jsx)("strong",{children:"Are you sure you want to delete this event?"}),(0,N.jsxs)("ul",{className:"mt-2",children:[(0,N.jsx)("li",{children:"This cannot be undone"}),(0,N.jsx)("li",{children:"Will remove all affiliations related to this event"})]})]}),(0,N.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,N.jsx)(D.Z,{type:"submit",onClick:function(){return r.current.setModalShow()},variant:"danger",className:"w-100",children:x?(0,N.jsx)(P.g,{}):(0,N.jsx)(N.Fragment,{children:"Delete this event"})})})]})})},M=n(6462);var E=function(e){var t=(0,h.I0)(),n=(0,a.useRef)(),r=(0,a.useState)(0),i=(0,s.Z)(r,2),l=i[0],x=i[1],j=(0,a.useState)(!1),f=(0,s.Z)(j,2),g=f[0],Z=f[1],b=(0,c.UO)(),y=(0,M.is)(1).eventMbs,w=function(){var n=(0,o.Z)((0,d.Z)().mark((function n(s){var a;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.preventDefault(),a={status:l},t((0,m.Nf)(e.eventId,a,Z)).then((function(e){e.status===p.OK&&(t((0,m.Bk)(b.id)),(0,v.uY)(y.map((function(e){return e.username}))))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,N.jsx)(C.Z,{ref:n,customBtn:"",btnIcon:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Status"}),title:"Update Status",children:(0,N.jsxs)(u.Z,{onSubmit:function(e){w(e)},children:[(0,N.jsxs)(u.Z.Group,{className:"mt-3",children:[(0,N.jsxs)(u.Z.Label,{children:["Update your event status as ",(0,N.jsx)("strong",{children:"FINISHED"})," or"," ",(0,N.jsx)("strong",{children:"CANCELLED"})]}),"\xa0",(0,N.jsx)("small",{children:(0,N.jsxs)("ul",{children:[(0,N.jsx)("li",{children:"Status can only be updated once"}),(0,N.jsx)("li",{children:"Event will remain as history but uninteractive"})]})}),(0,N.jsx)(u.Z.Check,{type:"radio",className:"fw-bold",id:"default-radio",label:"Finished",name:"status",value:2,onChange:function(e){return x(Number(e.target.value))},inline:!0}),(0,N.jsx)(u.Z.Check,{type:"radio",className:"fw-bold",id:"default-radio2",label:"Cancelled",name:"status",value:3,onChange:function(e){return x(Number(e.target.value))},inline:!0})]}),(0,N.jsxs)("div",{className:"mt-3",children:[(0,N.jsx)(D.Z,{type:"submit",children:g?(0,N.jsx)(P.g,{}):(0,N.jsx)(N.Fragment,{children:"Update"})}),(0,N.jsx)(D.Z,{className:"me-3 btn-cancel",onClick:function(){return n.current.setModalShow()},children:"Cancel"})]})]})})},L=function(e,t,n,s,a){return{options_owner:[{item:(0,N.jsx)("div",{children:(0,N.jsx)(x.Z,{type:"",btnStyle:"postBtn-placements",variant:"primary",onClick:a,placeholder:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Edit"})})})},{item:(0,N.jsx)(E,{eventId:e,eventTitle:t})},{item:(0,N.jsx)(B,{eventId:e,eventTitle:t})}],options_user:[{item:(0,N.jsx)(I.Z,{eventId:e,eventTitle:t})},{item:(0,N.jsx)(k,{eventId:e,userId:n,currentUser:s})}]}},T=n(3651),F=n(2240),U=n(5823);var R=function(e){var t=e.children;return(0,N.jsxs)(U.Z,{children:[(0,N.jsx)(U.Z.Toggle,{variant:"light",size:"sm",id:"dropdown-basic",children:(0,N.jsx)(f.Pj,{})}),(0,N.jsx)(U.Z.Menu,{children:t})]})},A=n(6479),H=n(3532),O=n(6104);var z=function(){var e=(0,a.useContext)(Te).eventData,t=(0,a.useContext)(T.q),n=(0,H.j)(!1),s=n.editorMode,r=n.handleClick;return(0,N.jsx)(N.Fragment,{children:!1===s?(0,N.jsxs)(i.Z,{className:"event-card",children:[(0,N.jsx)(i.Z.Header,{children:(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,N.jsx)(A.Z,{id:"profile-popover",data:e.userName,children:(0,N.jsx)(y.Q,{image:e.gravatarImage,imgClass:"userProf-img me-3 cursor-event"})}),(0,N.jsx)(w.OE,{eventData:e}),(0,N.jsx)(O.$,{children:t===e.user?(0,N.jsx)(R,{children:L(e.id,e.title,e.user,t,r).options_owner.slice(e.eventStatus===F.ew||e.eventStatus===F._H?2:"").map((function(e,t){return(0,N.jsx)("div",{className:"p-1",children:e.item},t)}))}):(0,N.jsx)(w.zq,{eventData:e})})]})}),(0,N.jsxs)(i.Z.Body,{children:[(0,N.jsxs)("div",{className:"details_textarea",children:[(0,N.jsx)("h4",{children:e.title}),(0,N.jsx)("span",{className:"content_sm1",dangerouslySetInnerHTML:{__html:e.details?(0,j.pf)(e.details):e.details}})]}),(0,N.jsxs)("div",{className:"details_textarea",children:[(0,N.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,N.jsx)("h6",{children:"Details"}),(0,N.jsxs)("small",{className:"text-muted",children:["Host:"," ",(0,N.jsxs)("a",{href:"/".concat(S.ih,"/").concat(S.L6,"?user=").concat(e.userName),children:["@",e.userName]})]}),(0,N.jsxs)("small",{className:"text-muted",children:["Posted: ",e.humanTimeDiffCreatedAt," ago"]}),(0,N.jsxs)("small",{className:"text-muted",children:["Date: ",e.eventDateString," "]}),(0,N.jsxs)("small",{className:"text-muted",children:["Audience Size: ",e.maxMember," "]})]}),(0,N.jsx)("div",{className:"mt-4",children:(0,N.jsx)(k,{})})]})]})]}):(0,N.jsx)(Z,{eventId:e.id,title:e.title,details:e.details,maxMembers:e.maxMember,cardStyle:t===e.user?"editor-card":"",handleUpate:r})})},q=n(1413),K=n(5987),Y=n(1694),V=n.n(Y),G=n(162),Q=["bsPrefix","size","vertical","className","role","as"],$=a.forwardRef((function(e,t){var n=e.bsPrefix,s=e.size,a=e.vertical,r=void 0!==a&&a,i=e.className,c=e.role,l=void 0===c?"group":c,d=e.as,o=void 0===d?"div":d,u=(0,K.Z)(e,Q),m=(0,G.vE)(n,"btn-group"),h=m;return r&&(h="".concat(m,"-vertical")),(0,N.jsx)(o,(0,q.Z)((0,q.Z)({},u),{},{ref:t,role:l,className:V()(i,h,s&&"".concat(m,"-").concat(s))}))}));$.displayName="ButtonGroup";var X=$,J=n(2331);var W=function(){var e=(0,h.I0)(),t=(0,a.useContext)(Te).eventData,n=(0,a.useState)(!1),r=(0,s.Z)(n,2),i=r[0],c=r[1],u=(0,M.is)(1).eventMbs,x=(0,w.JR)(u,t.user),j=function(){var n=(0,o.Z)((0,d.Z)().mark((function n(s,a){var r;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r={eventId:t.id,userId:a,status:s},e((0,m.TM)(r,c)).then((function(){e((0,m.Bk)(t.id)),(0,v.uY)(x.map((function(e){return e.username})))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,N.jsx)("div",{className:"mt-3",children:(0,N.jsx)(J.G,{headerItems:(0,N.jsx)("th",{colSpan:2,children:(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-center mx-2",children:["New requests (",x.length,")"]})}),tableItems:x.length>0?(0,N.jsx)(N.Fragment,{children:x.map((function(e,t){return(0,N.jsxs)("tr",{className:"table_row",children:[(0,N.jsx)(J.F,{cols:"col-11",children:(0,N.jsxs)("div",{className:"d-flex align-items-center col col-sm-9",children:[(0,N.jsx)(y.Q,{image:e.gravatarImage}),(0,N.jsxs)("div",{className:"ms-4",children:[(0,N.jsxs)(l.rU,{to:{pathname:"/".concat(S.ih,"/").concat(S.L6),search:"user=".concat(e.username)},children:["@",e.username]}),(0,N.jsx)("small",{className:"d-block text-muted",children:e.email})]})]})}),(0,N.jsx)(J.F,{cols:"col-1",children:(0,N.jsxs)(X,{"aria-label":"Basic example",className:"w-100 gap-1",children:[(0,N.jsx)(D.Z,{variant:"light",className:"postBtn-placements cta_button",onClick:function(){return j(1,e.userId)},children:i?(0,N.jsx)(P.g,{}):(0,N.jsx)("span",{className:"d-flex align-items-center",children:(0,N.jsx)(f.dR,{})})}),(0,N.jsx)(D.Z,{variant:"light",className:"postBtn-placements cta_button",onClick:function(){return j(2,e.userId)},children:i?(0,N.jsx)(P.g,{}):(0,N.jsx)("span",{className:"d-flex align-items-center",children:(0,N.jsx)(f.X1,{type:"custom"})})})]})})]},t)}))}):(0,N.jsx)("tr",{className:"table_row",children:(0,N.jsx)("td",{className:"text-center",children:(0,N.jsx)("div",{className:"table-content",children:(0,N.jsx)("h6",{className:"p-0 m-0",children:"No requests"})})})})})})};function ee(e){var t=(0,l.lr)({}),n=(0,s.Z)(t,1)[0].get("page");return n=parseInt(n),e>10&&e===10*n-9&&(n-=1),n}var te=n(5369);var ne=function(e){var t=(0,h.I0)(),n=(0,c.s0)(),r=(0,a.useRef)(),i=(0,a.useState)(!1),l=(0,s.Z)(i,2),m=l[0],x=l[1],v=ee(e.commentCount),j=function(){var s=(0,o.Z)((0,d.Z)().mark((function s(a){return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),t((0,te.PN)(e.commentId,x)).then((function(s){s.status===p.OK&&(t((0,te.h_)(e.eventId,v)),n("/".concat(S.Ks,"/").concat(e.eventId,"?page=").concat(v),{replace:!0,state:{id:v}}))}));case 2:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,N.jsx)(C.Z,{ref:r,customBtn:"",btnIcon:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(f.HG,{}),"Delete"]}),title:"Delete Comment",children:(0,N.jsxs)(u.Z,{onSubmit:function(e){j(e)},children:[(0,N.jsxs)("div",{className:"mt-3",children:[(0,N.jsx)("strong",{className:"d-block",children:"Are you sure you want to delete this comment?"}),(0,N.jsx)("span",{children:"This cannot be undone"})]}),(0,N.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:(0,N.jsx)(D.Z,{type:"submit",onClick:function(){return r.current.setModalShow()},variant:"danger w-100",children:m?(0,N.jsx)(P.g,{}):(0,N.jsx)(N.Fragment,{children:"Remove"})})})]})})},se=function(e,t,n,s){return{options_owner:[{item:(0,N.jsx)("div",{children:(0,N.jsx)(x.Z,{type:"",btnStyle:"postBtn-placements",variant:"primary",onClick:s,placeholder:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(f.I8,{}),"Edit"]})})})},{item:(0,N.jsx)(ne,{commentId:e,eventId:t,commentCount:n})}]}};var ae=function(e){var t=(0,h.I0)(),n=(0,a.useState)(e.content),r=(0,s.Z)(n,2),c=r[0],l=r[1],m=ee(),g=function(){var n=(0,o.Z)((0,d.Z)().mark((function n(s){var a;return(0,d.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.preventDefault(),a={content:c},t((0,te.uA)(e.commentId,a)).then((function(n){n.status===p.OK&&(t((0,te.h_)(e.eventId,m)),(0,v.uY)((0,j.Mh)(c)))})),e.handleUpate();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,N.jsx)(u.Z,{onSubmit:function(e){g(e)},className:"w-100",children:(0,N.jsxs)(i.Z,{className:"editor-card",children:[(0,N.jsx)(i.Z.Header,{className:"pb-0",children:(0,N.jsx)("h6",{className:"fw-bold m-0",children:"Edit comment"})}),(0,N.jsxs)(i.Z.Body,{children:[(0,N.jsx)(u.Z.Control,{spellCheck:!0,placeholder:"What's on your mind?",as:"textarea",value:c||"",onChange:function(e){return l(e.target.value)},required:!0}),(0,N.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,N.jsx)(x.Z,{type:"",btnStyle:"postBtn-placements",variant:"primary",onClick:e.handleUpate,placeholder:(0,N.jsxs)("div",{className:"d-flex align-items-center",children:[(0,N.jsx)(f.X1,{}),"Cancel"]})}),(0,N.jsx)(x.Z,{type:"submit",btnStyle:"formBtn cta_button",variant:"primary",formValidation:""===c,isLoading:"",placeholder:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Update"})})]})]})]})})},re=function(e){var t=e.commentData.totalLikes,n=e.commentData.likeStatus,s=n&&t>2?"Liked by you and ".concat(t-1," others"):n&&1===t?"You liked this":!n&&t>1||n&&2===t?"".concat(t," likes"):n||1!==t?"Like":"".concat(t," like");return(0,N.jsxs)("span",{className:"d-flex align-items-center fw-normal small text-muted",children:[(0,N.jsx)(f.mN,{likeStatus:e.commentData.likeStatus}),s]})},ie=n(2004);var ce=function(e){var t=(0,h.I0)(),n=(0,a.useContext)(Te).eventData,s=(0,a.useContext)(T.q),r=(0,H.j)(!1),c=r.editorMode,l=r.handleClick,d=ee();return(0,N.jsxs)("div",{className:"event-card_dash m-0 mt-4",children:[(0,N.jsxs)("div",{className:"d-flex",id:"card_header",children:[(0,N.jsx)(A.Z,{id:"profile-popover",data:e.commentData.username,children:(0,N.jsx)(y.Q,{image:e.commentData.gravatarImage,imgClass:"me-2 cursor-event",id:"card-img"})}),(0,N.jsx)(ie.R,{username:e.commentData.username,size:"sm"}),(0,N.jsx)("div",{className:"me-auto",children:(0,N.jsxs)("span",{className:"card-timestamp text-muted align-self-center",children:[e.commentData.humanTimeDiffCreatedAt," ago"]})}),(0,N.jsx)(O.$,{children:s===e.commentData.user&&(0,N.jsx)(R,{children:se(e.commentData.id,n.id,e.commentCount,l).options_owner.map((function(e,t){return(0,N.jsx)("div",{className:"p-1",children:e.item},t)}))})})]}),c?(0,N.jsx)(ae,{eventId:n.id,commentId:e.commentData.id,content:e.commentData.content,handleUpate:l}):(0,N.jsx)(i.Z,{className:"comment-item",children:(0,N.jsxs)(i.Z.Body,{children:[(0,N.jsx)(i.Z.Text,{className:"content_sm1",dangerouslySetInnerHTML:{__html:e.commentData.content?(0,j.pf)(e.commentData.content):e.commentData.content}}),(0,N.jsx)(O.$,{children:(0,N.jsx)(X,{"aria-label":"Basic example",className:"mt-3 w-100 gap-2",children:(0,N.jsx)(D.Z,{variant:"light",className:"postBtn-placements cta_button p-0",onClick:function(){t((0,te.Hv)(e.commentData.id)).then((function(s){s.status===p.OK&&(t((0,te.h_)(n.id,d)),(0,v.uY)([e.commentData.username]))}))},children:(0,N.jsx)(re,{commentData:e.commentData})})})})]})})]})},le=n(4877),de=n(5178),oe=n(7571);var ue=function(e){var t=e.onCommentChange,n=e.formValue,r=e.identifier,i=(0,a.useContext)(Te).eventMbs,c=(0,w.vi)(i),l=(0,a.useState)(!1),d=(0,s.Z)(l,2),o=d[0],u=d[1],m=(0,a.useState)([]),h=(0,s.Z)(m,2),x=h[0],v=h[1],j=function(e){if(!e)return"";var t=e.split(" ");return t[t.length-1]};(0,a.useEffect)((function(){j(n).includes(r)?u(!0):u(!1)}),[n]);var f=(0,a.useCallback)((function(e){var s=e.username,a=document.getElementsByName("content")[0];s=j(n).includes(r)?"".concat(e.username," "):"".concat(r).concat(e.username," ");var i=n&&!j(n).includes(r)?"".concat(n).concat(s):n&&j(n).includes(r)?"".concat(n.replace(j(n),r)).concat(s):s;a&&a.focus(),t(i)}),[n,r,t]);return(0,a.useEffect)((function(){for(var e,t=new RegExp("".concat(r,"(\\w+)"),"g"),s=[],a=function(){var t=e[1],n=c.find((function(e){return e.username.includes(t)}));n&&s.push(n)};null!==(e=t.exec(j(n)));)a();v(s)}),[n,r]),(0,N.jsxs)(U.Z,{show:o,onToggle:function(){return u(!o)},children:[(0,N.jsx)(U.Z.Toggle,{variant:"light",size:"sm",id:"dropdown-tag",children:r}),(0,N.jsx)(U.Z.Menu,{children:c.length>0?(x.length>0?x:c).map((function(e,t){return(0,N.jsx)(U.Z.Item,{onClick:function(){return f(e)},children:(0,N.jsxs)("div",{className:"d-block",children:[(0,N.jsx)("img",{src:e.gravatarImage,className:"members-img me-3",alt:"Img"}),e.username]})},t)})):(0,N.jsx)(U.Z.Item,{children:(0,N.jsx)("span",{children:"No suggestions"})})})]})};var me=function(e){var t={content:""},n=(0,h.I0)(),r=(0,a.useRef)(0),c=ee(),l=(0,a.useState)(!1),m=(0,s.Z)(l,2),f=m[0],g=m[1],Z=(0,a.useState)(!1),b=(0,s.Z)(Z,2),C=b[0],w=b[1],S=(0,a.useContext)(Te).eventData,k=(0,a.useContext)(le.S),I=(0,oe.n)(t),D=I.formValue,P=I.setFormValue,_=I.handleFieldChange,B=(0,a.useCallback)((function(e){P((function(t){return(0,q.Z)((0,q.Z)({},t),{},{content:e})}))}),[P]);(0,a.useEffect)((function(){""===D.content?w(!0):w(!1)}),[D]);var M=function(){var s=(0,o.Z)((0,d.Z)().mark((function s(a){var i;return(0,d.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:a.preventDefault(),i=(0,q.Z)((0,q.Z)({},D),{},{content:D.content}),n((0,te.Yr)(e.id,i,g)).then((function(s){s.status===p.OK&&(r.current.reset(),P(t),n((0,te.h_)(e.id,c)),(0,v.uY)((0,j.Mh)(i.content,S.userName)))}));case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,N.jsx)(i.Z,{className:"comment-card",children:(0,N.jsx)(i.Z.Body,{children:(0,N.jsxs)(u.Z,{onSubmit:function(e){M(e)},ref:r,children:[(0,N.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,N.jsx)(y.Q,{image:k.currentUser.gravatarImage,imgClass:"user-img me-3"}),(0,N.jsx)(u.Z.Control,{name:"content",spellCheck:!0,placeholder:"Add a comment...",as:"textarea",value:0!==Object.keys(D.content).length?D.content:"",onChange:_,rows:2,required:!0})]}),(0,N.jsx)(de.O,{}),(0,N.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,N.jsx)(ue,{onCommentChange:B,formValue:D.content,identifier:"@"}),(0,N.jsx)(x.Z,{type:"submit",btnStyle:"formBtn cta_button",variant:"primary",formValidation:C,isLoading:f,placeholder:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Comment"})})]})]})})})},he=n(6445),xe=["active","disabled","className","style","activeLabel","children","linkStyle","linkClassName"],ve=["children"],je=a.forwardRef((function(e,t){var n=e.active,s=void 0!==n&&n,a=e.disabled,r=void 0!==a&&a,i=e.className,c=e.style,l=e.activeLabel,d=void 0===l?"(current)":l,o=e.children,u=e.linkStyle,m=e.linkClassName,h=(0,K.Z)(e,xe),x=s||r?"span":he.Z;return(0,N.jsx)("li",{ref:t,style:c,className:V()(i,"page-item",{active:s,disabled:r}),children:(0,N.jsxs)(x,(0,q.Z)((0,q.Z)({className:V()("page-link",m),style:u},h),{},{children:[o,s&&d&&(0,N.jsx)("span",{className:"visually-hidden",children:d})]}))})}));je.displayName="PageItem";var fe=je;function pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=a.forwardRef((function(e,s){var a=e.children,r=(0,K.Z)(e,ve);return(0,N.jsxs)(je,(0,q.Z)((0,q.Z)({},r),{},{ref:s,children:[(0,N.jsx)("span",{"aria-hidden":"true",children:a||t}),(0,N.jsx)("span",{className:"visually-hidden",children:n})]}))}));return s.displayName=e,s}var ge=pe("First","\xab"),Ne=pe("Prev","\u2039","Previous"),Ze=pe("Ellipsis","\u2026","More"),be=pe("Next","\u203a"),ye=pe("Last","\xbb"),Ce=["bsPrefix","className","size"],we=a.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,a=e.size,r=(0,K.Z)(e,Ce),i=(0,G.vE)(n,"pagination");return(0,N.jsx)("ul",(0,q.Z)((0,q.Z)({ref:t},r),{},{className:V()(s,i,a&&"".concat(i,"-").concat(a))}))}));we.displayName="Pagination";var Se=Object.assign(we,{First:ge,Prev:Ne,Ellipsis:Ze,Item:fe,Next:be,Last:ye}),ke=function(e){for(var t=e.postsPerPage,n=e.totalPosts,s=e.paginate,a=e.currentPage,i=[],c=1;c<=Math.ceil(n/t);c++)i.push(c);return(0,N.jsx)("div",{className:"paginate_div",children:(0,N.jsx)(Se,{size:"sm",children:(0,N.jsxs)(r.Z,{className:"d-flex justify-content-center",id:"pagi-container",children:[(0,N.jsx)(Se.Prev,{id:"prev",onClick:function(){return s(a-1)},disabled:1===a,children:"Prev"}),1!==a&&i.length>5&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Se.First,{onClick:function(){return s(1)},disabled:1===a,children:"1"}),(0,N.jsx)(Se.Ellipsis,{disabled:!0})]}),i.map((function(e,t){return(0,N.jsx)("div",{children:(0,N.jsx)(Se.Item,{active:e===a,onClick:function(){return s(e)},href:"#",children:e})},t)})),a!==i.length&&i.length>5&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Se.Ellipsis,{disabled:!0}),(0,N.jsx)(Se.Last,{onClick:function(){return s(i.length)},disabled:a===i.length,children:i.length})]}),(0,N.jsx)(Se.Next,{id:"next",onClick:function(){return s(a+1)},disabled:a===i.length,children:"Next"})]})})})},Ie=["bsPrefix","active","children","className","as","linkAs","linkProps","href","title","target"],De=a.forwardRef((function(e,t){var n=e.bsPrefix,s=e.active,a=void 0!==s&&s,r=e.children,i=e.className,c=e.as,l=void 0===c?"li":c,d=e.linkAs,o=void 0===d?he.Z:d,u=e.linkProps,m=void 0===u?{}:u,h=e.href,x=e.title,v=e.target,j=(0,K.Z)(e,Ie),f=(0,G.vE)(n,"breadcrumb-item");return(0,N.jsx)(l,(0,q.Z)((0,q.Z)({ref:t},j),{},{className:V()(f,i,{active:a}),"aria-current":a?"page":void 0,children:a?r:(0,N.jsx)(o,(0,q.Z)((0,q.Z)({},m),{},{href:h,title:x,target:v,children:r}))}))}));De.displayName="BreadcrumbItem";var Pe=De,_e=["bsPrefix","className","listProps","children","label","as"],Be=a.forwardRef((function(e,t){var n=e.bsPrefix,s=e.className,a=e.listProps,r=void 0===a?{}:a,i=e.children,c=e.label,l=void 0===c?"breadcrumb":c,d=e.as,o=void 0===d?"nav":d,u=(0,K.Z)(e,_e),m=(0,G.vE)(n,"breadcrumb");return(0,N.jsx)(o,(0,q.Z)((0,q.Z)({"aria-label":l,className:s,ref:t},u),{},{children:(0,N.jsx)("ol",(0,q.Z)((0,q.Z)({},r),{},{className:V()(m,null==r?void 0:r.className),children:i}))}))}));Be.displayName="Breadcrumb";var Me=Object.assign(Be,{Item:Pe});var Ee=function(e){return(0,N.jsx)(N.Fragment,{children:e.items&&(0,N.jsx)(Me,{className:"w-100",children:e.items.map((function(e,t){return(0,N.jsx)(Me.Item,{href:e.path,active:e.current,className:"text-truncate",children:e.title},t)}))})})},Le=n(8899),Te=(0,a.createContext)();var Fe=function(){var e=ee(),t=(0,c.TH)().state,n=(0,M.is)(e),d=n.eventData,o=n.commentData,u=n.eventMbs,m=(0,a.useState)(1),h=(0,s.Z)(m,2),x=h[0],v=h[1],j=(0,a.useState)(10),p=(0,s.Z)(j,1)[0],g=(0,l.lr)({}),Z=(0,s.Z)(g,2),b=(Z[0],Z[1]);(0,a.useEffect)((function(){if(t){var e=t.id;v(e)}}),[t]),(0,a.useEffect)((function(){b({page:x})}),[b,x]);var y=d?[{title:"Dashboard",path:"/".concat(S.vA),current:!1},{title:d.title,path:"/".concat(S.Ks,"/").concat(d.id),current:!0}]:"",C=function(){return d?{eventActive:d.eventStatus!==F.ew&&d.eventStatus!==F._H,participant:d.joinedStatus===F.vP||d.joinedStatus===F.yI}:null};return(0,N.jsx)(Te.Provider,{value:{eventData:d,eventMbs:u},children:d&&(0,N.jsx)("div",{style:{position:"relative"},children:(0,N.jsxs)("div",{className:"dash-container",children:[(0,N.jsx)("div",{className:"content",children:(0,N.jsxs)(r.Z,{className:"content-wrapper",children:[(0,N.jsx)(Ee,{items:y}),o.results&&o.count>0?o.results.map((function(e,t){return(0,N.jsx)("div",{children:(0,N.jsx)(ce,{commentData:e,commentCount:o.count})},t)})):(0,N.jsx)(i.Z,{className:"comment-item",children:(0,N.jsxs)(i.Z.Body,{className:"text-center",children:[(0,N.jsx)("h6",{className:"p-0 m-0",children:"No events scheduled"}),(0,N.jsx)("small",{children:"List of events in which you participate or events you create."})]})}),o.count>10&&(0,N.jsx)(ke,{postsPerPage:p,totalPosts:o.count,paginate:function(e){return v(e)},currentPage:x})]})}),(0,N.jsx)("div",{className:"sidebar_eventDash",children:(0,N.jsx)("div",{className:"sidebar_eventDash-wrapper",children:(0,N.jsxs)(r.Z,{className:"content-wrapper",children:[(d.eventStatus===F.ew||d.eventStatus===F._H)&&(0,N.jsx)(Le.r,{title:"Note",content:(0,N.jsxs)(N.Fragment,{children:["This event now has"," ",(0,N.jsx)(w.sT,{eventStatus:d.eventStatus})," ","therefore it can not be updated or participated in."]}),icon:(0,N.jsx)(f.d,{}),cardStyle:{backgroundColor:"#eaebfd"}}),(0,N.jsx)(z,{}),(0,N.jsxs)(O.$,{children:[C().eventActive&&(C().participant?(0,N.jsx)(me,{id:d.id}):(0,N.jsx)(i.Z,{className:"event-card",children:(0,N.jsx)(i.Z.Body,{children:(0,N.jsx)("small",{className:"fw-semibold",children:"You will be able to collaborate with others via comments once your request is approved."})})})),(d?d.joinedStatus===F.vP&&!d.fullStatus&&d.eventStatus!==F.ew&&d.eventStatus!==F._H:null)&&(0,N.jsx)(W,{})]})]})})})]})})})}}}]);
//# sourceMappingURL=53.56893567.chunk.js.map