"use strict";(self.webpackChunkrunit=self.webpackChunkrunit||[]).push([[160],{2160:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var a=s(9439),n=s(2791),i=s(7022),r=s(9743),c=s(2677),l=s(9140),o=s(4165),d=s(1413),u=s(5861),m=s(5313),x=s(6030),h=s(5551),j=s(2254),f=s(4035),v=s(2557),g=s(9472),p=s(271),Z=s(7571),N=s(184);var b=function(e){var t=(0,x.I0)(),s=(0,n.useRef)(0),i={title:"",maxMember:0,details:"",date:"",time:""},b=(0,Z.n)(i),D=b.formValue,S=b.setFormValue,y=b.handleFieldChange,w=(0,n.useState)(!1),C=(0,a.Z)(w,2),L=C[0],k=C[1],E=(0,n.useState)({load:!1,error:""}),I=(0,a.Z)(E,2),T=I[0],_=I[1],M=new Date(D.date),O=(0,g._)();(0,n.useEffect)((function(){/\S/.test(D.details)?k(!1):k(!0)}),[D.details]);var F=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(s){var a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),a=(0,d.Z)((0,d.Z)({},D),{},{year:M.getFullYear(),month:M.getMonth()+1,day:M.getDate(),hour:""!==D.time?parseInt(D.time.split(":")[0]):"",minute:""!==D.time?parseInt(D.time.split(":")[1]):""}),t((0,h.My)(a,_)).then((function(){t((0,h.IP)(O)),(0,j.uY)((0,v.M)(D.details))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){T.error===p.OK&&(s.current.reset(),S(i),_({error:""}))}),[T.error]),(0,n.useEffect)((function(){0!==Object.keys(e.suggestion).length&&S({title:"".concat(e.suggestion.title," - ").concat(e.suggestion.category),details:"Location: ".concat(e.suggestion.location," \nLink: ").concat(e.suggestion.link,"\n\n"),date:new Date(e.suggestion.time).toISOString().split("T")[0],time:new Date(e.suggestion.time).toLocaleTimeString("en-US",{timeStyle:"short",hour12:!1})})}),[e.suggestion,S]),(0,N.jsxs)(l.Z,{className:"create_event-card",children:[(0,N.jsx)(l.Z.Header,{children:(0,N.jsx)("p",{className:"fw-bold m-0",children:"Create event"})}),(0,N.jsx)(l.Z.Body,{children:(0,N.jsxs)(m.Z,{onSubmit:function(e){F(e)},ref:s,children:[(0,N.jsxs)("div",{className:"new-post-container",children:[(0,N.jsx)(r.Z,{children:(0,N.jsx)(c.Z,{children:(0,N.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,N.jsx)(m.Z.Label,{className:"m-1",children:"Event Title"}),(0,N.jsx)(m.Z.Control,{type:"title",name:"title",value:D.title,onChange:y,required:!0})]})})}),(0,N.jsxs)(r.Z,{children:[(0,N.jsx)(c.Z,{children:(0,N.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,N.jsx)(m.Z.Label,{className:"m-1",children:"Size"}),(0,N.jsx)(m.Z.Control,{type:"number",name:"maxMember",className:"mb-3",onChange:y,min:"2",required:!0})]})}),(0,N.jsx)(c.Z,{children:(0,N.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,N.jsx)(m.Z.Label,{className:"m-1",children:"Time"}),(0,N.jsx)(m.Z.Control,{type:"time",placeholder:"Time",name:"time",value:D.time,onChange:y,required:!0})]})}),(0,N.jsx)(c.Z,{children:(0,N.jsxs)(m.Z.Group,{className:"mb-3",children:[(0,N.jsx)(m.Z.Label,{className:"m-1",children:"Date"}),(0,N.jsx)(m.Z.Control,{type:"date",placeholder:"Date",name:"date",value:D.date,onChange:y,min:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],required:!0})]})})]}),(0,N.jsx)(m.Z.Group,{children:(0,N.jsx)(m.Z.Control,{spellCheck:!0,name:"details",placeholder:"Write event details...",as:"textarea",value:D.details,onChange:y,rows:4,required:!0})})]}),(0,N.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,N.jsx)("small",{className:"text-danger",children:T.error}),(0,N.jsx)(f.Z,{type:"submit",btnStyle:"formBtn cta_button",variant:"primary",formValidation:L,isLoading:T.load,placeholder:(0,N.jsx)("div",{className:"d-flex align-items-center",children:"Post"})})]})]})})]})},D=s(8824),S=s(1087),y=s(7689),w=s(1243),C=s(5892),L=s(2060),k=s(564),E=s(6760);var I=function(e){return(0,N.jsxs)("div",{className:"event-card_dash",children:[(0,N.jsxs)("div",{className:"d-flex",id:"card_header",children:[(0,N.jsx)(w.Z,{data:e.eventData.userName,children:(0,N.jsx)(k.Q,{image:e.eventData.gravatarImage,imgClass:"me-2 cursor-event",id:"card-img"})}),(0,N.jsx)(E.R,{username:e.eventData.userName,size:"sm"}),(0,N.jsx)("div",{className:"me-auto",children:(0,N.jsxs)("span",{className:"card-timestamp text-muted align-self-center",children:[e.eventData.humanTimeDiffCreatedAt," ago"]})}),(0,N.jsx)(L.OE,{eventData:e.eventData}),(0,N.jsx)(L.zq,{eventData:e.eventData,btnStyleFull:!1})]}),(0,N.jsxs)(l.Z,{children:[(0,N.jsxs)(l.Z.Body,{children:[(0,N.jsx)("div",{className:"event-brief mt-1",children:(0,N.jsxs)("h4",{children:[e.eventData.title," "]})}),(0,N.jsx)("div",{className:"mt-2",children:(0,N.jsx)("p",{className:"text-muted content_sm1",dangerouslySetInnerHTML:{__html:e.eventData.details}})}),(0,N.jsx)("div",{children:(0,N.jsx)(L.sT,{content:e.eventData.timeToEvent,eventStatus:e.eventData.eventStatus})})]}),(0,N.jsx)(l.Z.Footer,{children:(0,N.jsxs)(S.rU,{to:"/event/".concat(e.eventData.id),children:["Details ",(0,N.jsx)(C.ol,{})]})})]})]})},T=s(9807),_=s(9150);var M=function(){var e=(0,x.I0)(),t=(0,n.useState)({}),s=(0,a.Z)(t,2),i=s[0],r=s[1];(0,n.useEffect)((function(){e((0,T.xV)())}),[e]);var c=(0,x.v9)((function(e){return e.users.currProfile}));return(0,n.useEffect)((function(){c&&r(c.data)}),[c]),(0,N.jsx)(N.Fragment,{children:i?(0,N.jsxs)("div",{className:"w-100",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center userInfo-div",children:[(0,N.jsx)(k.Q,{image:i.gravatarImage}),(0,N.jsxs)("div",{className:"ms-3",children:[(0,N.jsx)(E.R,{username:i.username}),(0,N.jsx)("small",{className:"d-block text-muted",children:i.email})]})]}),(0,N.jsxs)("div",{className:"mt-3",children:[(0,N.jsx)(_.O,{votes:i.totalVote}),(0,N.jsx)(_.c,{status:i.statusMessage,lastLogin:i.last_login})]})]}):""})},O=s(9190),F=s(3360),P=s(5736),q=s(1398),R=s(1275),z=s(3826),B=s(9813),G=function(e){var t=(0,n.useState)(!1),s=(0,a.Z)(t,2),i=s[0],r=s[1],c=(0,n.useRef)(null),l=function(){r(!0)},o=function(){r(!1)};return(0,N.jsx)(z.Z,{show:i,placement:"auto",container:c,overlay:(0,N.jsx)(B.Z,{id:"popover-basic",onMouseEnter:l,onMouseLeave:o,children:(0,N.jsxs)(B.Z.Body,{children:[(0,N.jsxs)("div",{className:"p-2",children:[(0,N.jsx)("span",{className:"fw-bold",children:"Location: "}),(0,N.jsx)("span",{children:e.content.location})]}),(0,N.jsxs)("div",{className:"p-2",children:[(0,N.jsx)("span",{className:"fw-bold",children:"Date: "}),(0,N.jsx)("span",{children:new Date(e.content.timeStamp).toLocaleDateString()})]}),(0,N.jsxs)("div",{className:"p-2",children:[(0,N.jsx)("span",{className:"fw-bold",children:"Time: "}),(0,N.jsx)("span",{children:new Date(e.content.timeStamp).toLocaleTimeString("en-US",{timeStyle:"short",hour12:!0})})]}),(0,N.jsx)("div",{className:"p-2",children:(0,N.jsx)("a",{href:e.content.link,rel:"noreferrer",target:"_blank",children:"More Information"})})]})}),children:(0,N.jsx)("span",{onMouseEnter:l,onMouseLeave:o,ref:c,className:"username_tags align-self-center",children:e.icon})})},V=s(4569),U=s.n(V),H=s(9559),Q=s(4855);U().defaults.baseURL="".concat("http://localhost:8000","/api");var Y=function(e){var t=(0,x.I0)(),s=(0,n.useState)([]),i=(0,a.Z)(s,2),r=i[0],c=i[1],l=(0,n.useState)(!1),d=(0,a.Z)(l,2),m=d[0],h=d[1];(0,n.useEffect)((function(){t(function(e,t){return function(){var s=(0,u.Z)((0,o.Z)().mark((function s(a){return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0),s.next=3,(0,H.g$)().then((function(t){(0,H.o4)(t.data.access),U().get("/event/createSuggestions/".concat(e,"/")).then((function(e){a({type:Q.NR,payload:e.data})})).catch((function(e){a({type:Q.Cg,payload:e.response.data})}))}));case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(e||1,h))}),[t,e,h]);var j=(0,x.v9)((function(e){return e.suggestions.suggestEvent}));return(0,n.useEffect)((function(){j&&c(j)}),[j]),{suggestData:r,isLoading:m}};var A=function(e){var t,s=(0,n.useState)(""),i=(0,a.Z)(s,2),r=i[0],c=i[1],l=Y(1);(0,n.useEffect)((function(){e.userData&&r&&e.userData(r)}),[r,e]);for(var o=0;o<4;o++)t=(0,N.jsx)(R.O,{});return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(q.Z,{as:"ol",className:"mb-3 suggested",children:[(0,N.jsx)("div",{className:"ps-1",children:(0,N.jsx)("p",{className:"fw-bold m-0",children:"Suggestions"})}),l.suggestData.data?l.suggestData.data.map((function(e,t){return(0,N.jsxs)(q.Z.Item,{as:"li",className:"p-3",children:[(0,N.jsxs)("div",{className:"d-flex justify-content-between gap-1 align-items-start",children:[(0,N.jsx)("div",{className:"me-auto",children:(0,N.jsx)("span",{className:"fw-bold",children:e.title})}),(0,N.jsx)(G,{content:{location:e.location,timeStamp:e.time,link:e.link},icon:(0,N.jsx)(C.d,{})})]}),(0,N.jsx)("div",{className:"mt-3",children:(0,N.jsx)("img",{src:e.image,alt:"suggested-event-img",width:"100%"})}),(0,N.jsxs)("div",{className:"d-flex justify-content-between align-items-start mt-4",children:[(0,N.jsx)(P.Z,{bg:"secondary",children:e.category}),(0,N.jsx)(F.Z,{className:"d-block",onClick:function(){return c(e)},size:"sm",children:"Event it"})]})]},t)})):l.isLoading?t:""]})})};var K=function(){var e=(0,n.useState)(1),t=(0,a.Z)(e,2),s=t[0],o=t[1],d=(0,n.useState)(10),u=(0,a.Z)(d,1)[0],m=(0,S.lr)({}),x=(0,a.Z)(m,2),h=(x[0],x[1]),j=(0,y.TH)().state,f=(0,g._)(),v=(0,O.bi)(f);(0,n.useEffect)((function(){if(j){var e=j.id;o(e)}}),[j]),(0,n.useEffect)((function(){h({page:s})}),[h,s]);var p=(0,n.useState)({}),Z=(0,a.Z)(p,2),w=Z[0],C=Z[1];return(0,N.jsx)("div",{style:{position:"relative"},children:(0,N.jsxs)("div",{className:"dash-container",id:"main",children:[(0,N.jsx)("div",{className:"sidebar",children:(0,N.jsx)("div",{className:"sidebar-wrapper",children:(0,N.jsx)("div",{className:"sidebar_left",children:(0,N.jsx)(A,{userData:function(e){e&&C(e)}})})})}),(0,N.jsx)("div",{className:"content",children:(0,N.jsxs)(i.Z,{children:[(0,N.jsxs)("div",{children:[(0,N.jsx)(b,{suggestion:w}),(0,N.jsx)(r.Z,{xs:1,sm:1,md:1,children:v.results?v.results.map((function(e,t){return(0,N.jsx)(c.Z,{children:(0,N.jsx)(I,{eventData:e})},t)})):""})]}),v.count>10?(0,N.jsx)(D.Z,{postsPerPage:u,totalPosts:v.count,paginate:function(e){return o(e)},currentPage:s}):""]})}),(0,N.jsx)("div",{className:"sidebar",children:(0,N.jsx)("div",{className:"sidebar-wrapper ",children:(0,N.jsx)("div",{className:"sidebar_right",children:(0,N.jsx)(l.Z,{children:(0,N.jsx)(l.Z.Body,{children:(0,N.jsx)(M,{})})})})})})]})})}}}]);
//# sourceMappingURL=160.ef2fb0dd.chunk.js.map