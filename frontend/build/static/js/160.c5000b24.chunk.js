"use strict";(self.webpackChunkrunit=self.webpackChunkrunit||[]).push([[160],{2160:function(e,t,s){s.r(t),s.d(t,{default:function(){return Q}});var n=s(9439),a=s(2791),r=s(7022),i=s(9743),c=s(2677),l=s(9140),o=s(4165),d=s(5861),u=s(5313),m=s(6030),h=s(5551),x=s(2254),j=s(4035),f=s(2557),v=s(9472),g=s(271),p=s(184);var Z=function(e){var t=(0,m.I0)(),s=(0,a.useRef)(0),r=(0,a.useState)(""),Z=(0,n.Z)(r,2),N=Z[0],b=Z[1],S=(0,a.useState)(""),D=(0,n.Z)(S,2),y=D[0],w=D[1],C=(0,a.useState)(""),E=(0,n.Z)(C,2),k=E[0],L=E[1],I=(0,a.useState)(""),T=(0,n.Z)(I,2),_=T[0],M=T[1],O=(0,a.useState)(""),P=(0,n.Z)(O,2),q=P[0],B=P[1],F=(0,a.useState)(!1),G=(0,n.Z)(F,2),z=G[0],U=G[1],H=(0,a.useState)(!1),R=(0,n.Z)(H,2),V=R[0],Q=R[1],Y=(0,a.useState)(""),A=(0,n.Z)(Y,2),J=A[0],K=A[1],W=new Date(_),$=(0,v._)();(0,a.useEffect)((function(){Q(""===k||"<p><br></p>"===k)}),[k]);var X=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(s){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),n={title:N,maxMember:y,details:k,year:W.getFullYear(),month:W.getMonth()+1,day:W.getDate(),hour:""!==q?parseInt(q.split(":")[0]):"",minute:""!==q?parseInt(q.split(":")[1]):""},t((0,h.My)(n,U,K)).then((function(){t((0,h.IP)($)),(0,x.uY)((0,f.M)(k))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){J===g.OK&&(s.current.reset(),b(""),M(""),B(""),L(""),K(""))}),[J]),(0,a.useEffect)((function(){0!==Object.keys(e.suggestion).length&&(b("".concat(e.suggestion.title," - ").concat(e.suggestion.category)),L("Location: ".concat(e.suggestion.location," \nLink: ").concat(e.suggestion.link,"\n\n")),M(new Date(e.suggestion.time).toISOString().split("T")[0]),B(new Date(e.suggestion.time).toLocaleTimeString("en-US",{timeStyle:"short",hour12:!1})))}),[e.suggestion]),(0,p.jsxs)(l.Z,{className:"create_event-card",children:[(0,p.jsx)(l.Z.Header,{children:(0,p.jsx)("p",{className:"fw-bold m-0",children:"Create event"})}),(0,p.jsx)(l.Z.Body,{children:(0,p.jsxs)(u.Z,{onSubmit:function(e){X(e)},ref:s,children:[(0,p.jsxs)("div",{className:"new-post-container",children:[(0,p.jsx)(i.Z,{children:(0,p.jsx)(c.Z,{children:(0,p.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,p.jsx)(u.Z.Label,{className:"m-1",children:"Event Title"}),(0,p.jsx)(u.Z.Control,{type:"title",placeholder:"",value:N,onChange:function(e){return b(e.target.value)},required:!0})]})})}),(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(c.Z,{children:(0,p.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,p.jsx)(u.Z.Label,{className:"m-1",children:"Size"}),(0,p.jsx)(u.Z.Control,{type:"number",className:"mb-3",placeholder:"",onChange:function(e){return w(parseInt(e.target.value))},min:"2",required:!0})]})}),(0,p.jsx)(c.Z,{children:(0,p.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,p.jsx)(u.Z.Label,{className:"m-1",children:"Time"}),(0,p.jsx)(u.Z.Control,{type:"time",placeholder:"Time",value:q,onChange:function(e){return B(e.target.value)},required:!0})]})}),(0,p.jsx)(c.Z,{children:(0,p.jsxs)(u.Z.Group,{className:"mb-3",children:[(0,p.jsx)(u.Z.Label,{className:"m-1",children:"Date"}),(0,p.jsx)(u.Z.Control,{type:"date",placeholder:"Date",value:_,onChange:function(e){return M(e.target.value)},min:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().split("T")[0],required:!0})]})})]}),(0,p.jsx)(u.Z.Group,{children:(0,p.jsx)(u.Z.Control,{spellCheck:!0,placeholder:"Write event details...",as:"textarea",value:k,onChange:function(e){return L(e.target.value)},rows:4,required:!0})})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between mt-3",children:[(0,p.jsx)("small",{className:"text-danger",children:J}),(0,p.jsx)(j.Z,{type:"submit",btnStyle:"formBtn cta_button",variant:"primary",formValidation:V,isLoading:z,placeholder:(0,p.jsx)("div",{className:"d-flex align-items-center",children:"Post"})})]})]})})]})},N=s(8824),b=s(1087),S=s(7689),D=s(5963),y=s(5892),w=s(2060),C=s(564);var E=function(e){return(0,p.jsxs)("div",{className:"event-card_dash",children:[(0,p.jsxs)("div",{className:"d-flex",id:"card_header",children:[(0,p.jsx)(C.Q,{image:e.eventData.gravatarImage,imgClass:" me-2",id:"card-img"}),(0,p.jsx)(D.Z,{data:e.eventData.userName}),(0,p.jsx)("div",{className:"me-auto",children:(0,p.jsxs)("span",{className:"card-timestamp text-muted align-self-center",children:[e.eventData.humanTimeDiffCreatedAt," ago"]})}),(0,p.jsx)(w.OE,{joinedStatus:e.eventData.joinedStatus}),(0,p.jsx)(w.zq,{JoinEvent:e.eventData,joinedStatus:e.eventData.joinedStatus,btnStyleFull:!1})]}),(0,p.jsxs)(l.Z,{children:[(0,p.jsxs)(l.Z.Body,{children:[(0,p.jsx)("div",{className:"event-brief mt-1",children:(0,p.jsxs)("h4",{children:[e.eventData.title," "]})}),(0,p.jsx)("div",{className:"mt-2",children:(0,p.jsx)("p",{className:"text-muted content_sm1",dangerouslySetInnerHTML:{__html:e.eventData.details}})}),(0,p.jsx)("div",{children:(0,p.jsx)(w.sT,{content:e.eventData.timeToEvent,eventStatus:e.eventData.eventStatus})})]}),(0,p.jsx)(l.Z.Footer,{children:(0,p.jsxs)(b.rU,{to:"/event/".concat(e.eventData.id),children:["Details ",(0,p.jsx)(y.ol,{})]})})]})]})},k=s(9807),L=s(9150);var I=function(){var e=(0,m.I0)(),t=(0,a.useState)({}),s=(0,n.Z)(t,2),r=s[0],i=s[1];(0,a.useEffect)((function(){e((0,k.xV)())}),[e]);var c=(0,m.v9)((function(e){return e.users.currProfile}));return(0,a.useEffect)((function(){c&&i(c.data)}),[c]),(0,p.jsx)(p.Fragment,{children:r?(0,p.jsxs)("div",{className:"w-100",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center userInfo-div",children:[(0,p.jsx)(C.Q,{image:r.gravatarImage}),(0,p.jsxs)("div",{className:"ms-3",children:[(0,p.jsxs)(b.rU,{to:{pathname:"/profile",search:"user=".concat(r.username)},children:["@",r.username]}),(0,p.jsx)("small",{className:"d-block text-muted",children:r.email})]})]}),(0,p.jsxs)("div",{className:"mt-3",children:[(0,p.jsx)(L.O,{votes:r.totalVote}),(0,p.jsx)(L.c,{status:r.statusMessage,lastLogin:r.last_login})]})]}):""})},T=s(9190),_=s(3360),M=s(5736),O=s(1398),P=s(1275),q=s(3826),B=s(9813),F=function(e){var t=(0,a.useState)(!1),s=(0,n.Z)(t,2),r=s[0],i=s[1],c=(0,a.useRef)(null),l=function(){i(!0)},o=function(){i(!1)};return(0,p.jsx)(q.Z,{show:r,placement:"auto",container:c,overlay:(0,p.jsx)(B.Z,{id:"popover-basic",onMouseEnter:l,onMouseLeave:o,children:(0,p.jsxs)(B.Z.Body,{children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("span",{className:"fw-bold",children:"Location: "}),(0,p.jsx)("span",{children:e.content.location})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("span",{className:"fw-bold",children:"Date: "}),(0,p.jsx)("span",{children:new Date(e.content.timeStamp).toLocaleDateString()})]}),(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)("span",{className:"fw-bold",children:"Time: "}),(0,p.jsx)("span",{children:new Date(e.content.timeStamp).toLocaleTimeString("en-US",{timeStyle:"short",hour12:!0})})]}),(0,p.jsx)("div",{className:"p-2",children:(0,p.jsx)("a",{href:e.content.link,rel:"noreferrer",target:"_blank",children:"More Information"})})]})}),children:(0,p.jsx)("span",{onMouseEnter:l,onMouseLeave:o,ref:c,className:"username_tags align-self-center",children:e.icon})})},G=s(4569),z=s.n(G),U=s(9559),H=s(4855),R=function(e){var t=(0,m.I0)(),s=(0,a.useState)([]),r=(0,n.Z)(s,2),i=r[0],c=r[1],l=(0,a.useState)(!1),u=(0,n.Z)(l,2),h=u[0],x=u[1];(0,a.useEffect)((function(){t(function(e,t){return function(){var s=(0,d.Z)((0,o.Z)().mark((function s(n){return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t(!0),s.next=3,(0,U.g$)().then((function(t){(0,U.o4)(t.data.access),z().get("http://localhost:8000/api/event/createSuggestions/".concat(e,"/")).then((function(e){n({type:H.NR,payload:e.data})})).catch((function(e){n({type:H.Cg,payload:e.response.data})}))}));case 3:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(e||1,x))}),[t,e,x]);var j=(0,m.v9)((function(e){return e.suggestions.suggestEvent}));return(0,a.useEffect)((function(){j&&c(j)}),[j]),{suggestData:i,isLoading:h}};var V=function(e){var t,s=(0,a.useState)(""),r=(0,n.Z)(s,2),i=r[0],c=r[1],l=R(1);(0,a.useEffect)((function(){e.userData&&i&&e.userData(i)}),[i,e]);for(var o=0;o<4;o++)t=(0,p.jsx)(P.O,{});return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(O.Z,{as:"ol",className:"mb-3 suggested",children:[(0,p.jsx)("div",{className:"ps-1",children:(0,p.jsx)("p",{className:"fw-bold m-0",children:"Suggestions"})}),l.suggestData.data?l.suggestData.data.map((function(e,t){return(0,p.jsxs)(O.Z.Item,{as:"li",className:"p-3",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between gap-1 align-items-start",children:[(0,p.jsx)("div",{className:"me-auto",children:(0,p.jsx)("span",{className:"fw-bold",children:e.title})}),(0,p.jsx)(F,{content:{location:e.location,timeStamp:e.time,link:e.link},icon:(0,p.jsx)(y.d,{})})]}),(0,p.jsx)("div",{className:"mt-3",children:(0,p.jsx)("img",{src:e.image,alt:"suggested-event-img",width:"100%"})}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-start mt-4",children:[(0,p.jsx)(M.Z,{bg:"secondary",children:e.category}),(0,p.jsx)(_.Z,{className:"d-block",onClick:function(){return c(e)},size:"sm",children:"Event it"})]})]},t)})):l.isLoading?t:""]})})};var Q=function(){var e=(0,a.useState)(1),t=(0,n.Z)(e,2),s=t[0],o=t[1],d=(0,a.useState)(10),u=(0,n.Z)(d,1)[0],m=(0,b.lr)({}),h=(0,n.Z)(m,2),x=(h[0],h[1]),j=(0,S.TH)().state,f=(0,v._)(),g=(0,T.bi)(f);(0,a.useEffect)((function(){if(j){var e=j.id;o(e)}}),[j]),(0,a.useEffect)((function(){x({page:s})}),[x,s]);var D=(0,a.useState)({}),y=(0,n.Z)(D,2),w=y[0],C=y[1];return(0,p.jsx)("div",{style:{position:"relative"},children:(0,p.jsxs)("div",{className:"dash-container",id:"main",children:[(0,p.jsx)("div",{className:"sidebar",children:(0,p.jsx)("div",{className:"sidebar-wrapper",children:(0,p.jsx)("div",{className:"sidebar_left",children:(0,p.jsx)(V,{userData:function(e){e&&C(e)}})})})}),(0,p.jsx)("div",{className:"content",children:(0,p.jsxs)(r.Z,{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(Z,{suggestion:w}),(0,p.jsx)(i.Z,{xs:1,sm:1,md:1,children:g.results?g.results.map((function(e,t){return(0,p.jsx)(c.Z,{children:(0,p.jsx)(E,{eventData:e})},t)})):""})]}),g.count>10?(0,p.jsx)(N.Z,{postsPerPage:u,totalPosts:g.count,paginate:function(e){return o(e)},currentPage:s}):""]})}),(0,p.jsx)("div",{className:"sidebar",children:(0,p.jsx)("div",{className:"sidebar-wrapper ",children:(0,p.jsx)("div",{className:"sidebar_right",children:(0,p.jsx)(l.Z,{children:(0,p.jsx)(l.Z.Body,{children:(0,p.jsx)(I,{})})})})})})]})})}}}]);
//# sourceMappingURL=160.c5000b24.chunk.js.map